{"version":3,"sources":["pages/Market.js","App.js","images/logo.png","pages/Offer.js","pages/OfferProcess.js","pages/Rules.js","pages/Profile.js","pages/Acquire.js","pages/Landing.js","images/lines.png","images/croco.png","images/croco2.png","images/founders.svg","images/believers.svg","images/claimers.svg","components/BidActions.js","pages/Bid.js","index.js","components/Helpers.js","components/Buttons.js","components/BidPreview.js"],"names":["MarketCommon","props","swrKey","swrFetcher","showBetsLink","useState","feed","setFeed","hasMore","setHasMore","fetchStats","a","mapStats","_near","contract","get_global_stats","stats","useSWR","errorRetryInterval","data","lastKey","length","nextPage","fetchMore","f","push","bids","map","bidId","key","className","to","numBids","numBidsOnClaim","loadMore","loader","BetsPage","fetchTopBets","get_top_bets","from_key","limit","ClaimsPage","fetchTopClaims","get_top_claims","NearConfig","window","location","hostname","accountSuffix","networkId","nodeUrl","contractName","walletUrl","marketPublicKey","wasmCode","claimPeriod","App","lsKey","lsOfferAccountId","lsFavorAccountId","lsPrevKeys","config","state","connected","account","_initNear","then","setState","signedIn","accountId","signedAccountId","keyStore","nearAPI","BrowserLocalStorageKeyStore","Object","assign","deps","near","this","walletConnection","getAccountId","viewMethods","changeMethods","logOut","signOut","_accountId","refreshAllowance","alert","requestSignIn","getAccessKeys","accessKeys","foundMarketKey","forEach","public_key","offerAccountId","ls","get","favorAccountId","addKey","undefined","deleteKey","console","log","offerFinished","offerSuccess","_keyStore","getKey","getPublicKey","toString","_authData","allKeys","index","offer","profile_id","String","parseInt","offerResult","fetch","arrayBuffer","buf","deployContract","Uint8Array","sender","lock","Buffer","from","code_hash","e","preventDefault","passProps","header","onClick","role","aria-hidden","style","backgroundColor","basename","process","title","src","Logo","alt","opacity","type","data-bs-toggle","data-bs-target","aria-controls","aria-expanded","aria-label","id","aria-current","href","data-ribbon","exact","path","React","Component","module","exports","OfferPage","offerButtonEnabled","setOfferButtonEnabled","appTitle","dotSuffix","offerInputValue","document","getElementById","value","favorInputValue","error","endsWith","balance","fromNear","getAccountBalance","total","set","origin","onSubmit","offerBid","width","margin","htmlFor","placeholder","OfferProcessPage","finished","success","StatsPage","rules","numProfiles","numOffers","numBets","numClaims","numAcquisitions","totalCommission","toFixed","ProfilePage","profileId","useParams","claimsOnly","setClaimsOnly","showRewardsButton","setShowRewardsButton","lowRewards","profile","profitTaken","availableRewards","mutate","collect_rewards","fetchProfile","mapProfile","get_profile","acquisitions","participation","useMyGreen","qq","minWidth","betsVolume","marginTop","maxWidth","disabled","grabRewards","AcquirePage","showAcquireButtons","setShowAcquireButtons","acquireSuccess","setAcquireSuccess","generateSeedPhrase","seedPhrase","setSeedPhrase","showSeedPhrase","setShowSeedPhrase","clickSeedPhrase","publicKey","parseSeedPhrase","acquire","bid_id","new_public_key","recoverLink","acquireBidSeedPhrase","defaultValue","acquireBidPublicKey","LandingPage","image","backgroundSize","backgroundRepeat","position","fluid","BackgroundImage","left","top","Croco2","borderRadius","class","FoundersImage","BelieversImage","ClaimersImage","paddingTop","paddingBottom","Croco","BetButton","betPrice","bidInfo","forfeit","totalBetPrice","bet","isSafe","betBid","ClaimButton","claimedBy","claimPrice","claim","claimBid","FinalizeButton","finalize","toOfferPage","finalizeBid","AcquireButton","BidPage","fetchBid","mapBidInfo","get_bid","fetchBidSafety","codeHash","accessKeysLen","Contract","lockerContract","get_owner","lockerOwner","bidSafety","isReady","isAtMarket","claimedTime","timeLeft","Intl","DateTimeFormat","year","month","day","hour","minute","second","format","founder","bets","believers","slice","Math","pow","isMine","profileBidId","showBetClaim","isOnAcquisition","showFinalize","showAcquire","Moment","startPooledTimer","date","add","seconds","durationFromNow","ReactDOM","render","s","parseFloat","b","num_claims","claim_status","bet_price","claim_price","on_acquisition","p","bets_volume","available_rewards","profit_taken","num_offers","num_bets","num_acquisitions","PriceButton","price","DetailsButton","BidPreview","bid","textDecoration","color"],"mappings":"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","file":"static/js/main.874bfe48.chunk.js","sourcesContent":["import React, { useState } from 'react'\nimport { Link } from 'react-router-dom'\nimport InfiniteScroll from 'react-infinite-scroller'\nimport useSWR from 'swr'\n\nimport { BidPreview } from '../components/BidPreview'\nimport { mapStats, loader } from '../components/Helpers'\n\nconst FetchLimit = 25\n\nfunction MarketCommon (props, swrKey, swrFetcher, showBetsLink) {\n  const [feed, setFeed] = useState([])\n  const [hasMore, setHasMore] = useState(true)\n\n  const fetchStats = async (...args) => {\n    return mapStats(await props._near.contract.get_global_stats())\n  }\n\n  const { data: stats } = useSWR('global_stats', fetchStats, { errorRetryInterval: 250 })\n\n  const lastKey = feed && feed.length > 0 ? feed[feed.length - 1] : null\n  const { data: nextPage } = useSWR([swrKey, lastKey], swrFetcher, { errorRetryInterval: 250 })\n\n  const fetchMore = async () => {\n    if (!nextPage) {\n      return\n    }\n    const f = [...feed]\n    f.push(...nextPage)\n    if (nextPage.length === 0) {\n      setHasMore(false)\n    }\n    setFeed(f)\n  }\n\n  const bids = feed && feed.map(([bidPrice, bidId]) => {\n    return (\n      <BidPreview {...props} key={bidId} bidId={bidId} />\n    )\n  })\n\n  return stats ? (\n    <div>\n      <div className='container g-0 px-5'>\n        <div className='d-flex flex-row bd-highlight mb-3'>\n          <div className='py-2 bd-highlight'>\n            {showBetsLink\n              ? <h5><Link className='navigate' to='/bets'>Active bids ({stats.numBids})</Link></h5>\n              : <h5 className='nonavigate'>Active bids ({stats.numBids})</h5>}\n          </div>\n          <div className='p-2 bd-highlight' />\n          <div className='p-2 bd-highlight'>\n            {showBetsLink\n              ? <h5 className='nonavigate'>On claim ({stats.numBidsOnClaim || '0'})</h5>\n              : <h5><Link className='navigate' to='/claims'>On claim ({stats.numBidsOnClaim || '0'})</Link></h5>}\n          </div>\n        </div>\n      </div>\n      <div className='container g-0 px-5'>\n        <InfiniteScroll\n          loadMore={fetchMore}\n          hasMore={hasMore}\n          loader={loader()}\n        >{bids}\n        </InfiniteScroll>\n      </div>\n    </div>\n  ) : (loader())\n}\n\nfunction BetsPage (props) {\n  const fetchTopBets = async (...args) => {\n    return (await props._near.contract.get_top_bets({\n      from_key: args[1],\n      limit: FetchLimit\n    }))\n  }\n  return MarketCommon(props, 'get_top_bets', fetchTopBets, false)\n}\n\nfunction ClaimsPage (props) {\n  const fetchTopClaims = async (...args) => {\n    return (await props._near.contract.get_top_claims({\n      from_key: args[1],\n      limit: FetchLimit\n    }))\n  }\n  return MarketCommon(props, 'get_top_claims', fetchTopClaims, true)\n}\n\nexport { ClaimsPage, BetsPage }\n","import React from 'react'\nimport 'error-polyfill'\nimport 'bootstrap/dist/js/bootstrap.bundle'\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport './App.scss'\nimport './gh-fork-ribbon.css'\nimport * as nearAPI from 'near-api-js'\nimport Logo from './images/logo.png'\nimport { HashRouter as Router, Link, Route, Switch } from 'react-router-dom'\nimport ls from 'local-storage'\nimport { BetsPage, ClaimsPage } from './pages/Market'\nimport OfferPage from './pages/Offer'\nimport OfferProcessPage from './pages/OfferProcess'\nimport RulesPage from './pages/Rules'\nimport ProfilePage from './pages/Profile'\nimport AcquirePage from './pages/Acquire'\nimport BidPage from './pages/Bid'\nimport LandingPage from './pages/Landing'\n\nconst IsMainnet = window.location.hostname === 'near.bet'\nconst TestNearConfig = {\n  accountSuffix: 'testnet',\n  networkId: 'testnet',\n  nodeUrl: 'https://rpc.testnet.near.org',\n  contractName: 'dev-1616355537428-9726228',\n  walletUrl: 'https://wallet.testnet.near.org',\n  marketPublicKey: 'ed25519:EgmA4v9E2SjFVu31bmJKJtNW6cjkx2cbM3HyXprsYvrA',\n  wasmCode: 'https://near.bet/bin',\n  claimPeriod: 15 * 60\n}\nconst MainNearConfig = {\n  accountSuffix: 'near',\n  networkId: 'mainnet',\n  nodeUrl: 'https://rpc.mainnet.near.org',\n  contractName: 'c.nearbet.near',\n  walletUrl: 'https://wallet.near.org',\n  marketPublicKey: 'ed25519:5mgNVstFy67S469tG2j8MjRchPuKqJFYsydghKRteR42',\n  wasmCode: 'https://near.bet/bin',\n  claimPeriod: 72 * 60 * 60\n}\n\nconst NearConfig = IsMainnet ? MainNearConfig : TestNearConfig\n\nclass App extends React.Component {\n  constructor (props) {\n    super(props)\n\n    this._near = {}\n\n    this._near.lsKey = NearConfig.contractName + ':v01:'\n    this._near.lsOfferAccountId = this._near.lsKey + 'offerAccountId'\n    this._near.lsFavorAccountId = this._near.lsKey + 'favorAccountId'\n    this._near.lsPrevKeys = this._near.lsKey + 'prevKeys'\n\n    this._near.config = NearConfig\n    this._near.marketPublicKey = NearConfig.marketPublicKey\n    this._near.accountSuffix = NearConfig.accountSuffix\n    this._near.claimPeriod = NearConfig.claimPeriod\n\n    this.state = {\n      connected: false,\n      account: null\n    }\n\n    this._initNear().then(() => {\n      this.setState({\n        signedIn: !!this._near.accountId,\n        signedAccountId: this._near.accountId,\n        connected: true\n      })\n    })\n  }\n\n  async _initNear () {\n    const keyStore = new nearAPI.keyStores.BrowserLocalStorageKeyStore()\n    const near = await nearAPI.connect(Object.assign({ deps: { keyStore } }, NearConfig))\n    this._near.keyStore = keyStore\n    this._near.near = near\n\n    this._near.walletConnection = new nearAPI.WalletConnection(near, NearConfig.contractName)\n    this._near.accountId = this._near.walletConnection.getAccountId()\n\n    this._near.account = this._near.walletConnection.account()\n    this._near.contract = new nearAPI.Contract(this._near.account, NearConfig.contractName, {\n      viewMethods: [\n        'get_profile',\n        'get_bid',\n        'get_top_bets',\n        'get_top_claims',\n        'get_global_stats'\n      ],\n      changeMethods: [\n        'offer',\n        'bet',\n        'claim',\n        'finalize',\n        'acquire',\n        'collect_rewards'\n      ]\n    })\n\n    this._near.logOut = () => {\n      this._near.walletConnection.signOut()\n      this._near.accountId = null\n      this.setState({\n        signedIn: !!this._accountId,\n        signedAccountId: this._accountId\n      })\n    }\n\n    this._near.refreshAllowance = async () => {\n      alert(\"You're out of access key allowance. Need sign in again to refresh it\")\n      await this.logOut()\n      await this.requestSignIn()\n    }\n\n    if (this._near.accountId) {\n      const accessKeys = await this._near.account.getAccessKeys()\n\n      let foundMarketKey = false\n      accessKeys.forEach(key => {\n        if (key.public_key === this._near.marketPublicKey) {\n          foundMarketKey = true\n        }\n      })\n\n      const offerAccountId = ls.get(this._near.lsOfferAccountId)\n      const favorAccountId = ls.get(this._near.lsFavorAccountId)\n      if (!foundMarketKey) {\n        try {\n          const account = await this._near.near.account(this._near.accountId)\n          await account.addKey(this._near.marketPublicKey, undefined, undefined, 0)\n          // === We have full access key at the point ===\n          if (this._near.accountId !== offerAccountId) {\n            // Wrong account\n            await account.deleteKey(this._near.marketPublicKey)\n            console.log('wrong account')\n            this.setState({ offerFinished: true, offerSuccess: false })\n          } else {\n            // NO WAY\n            // const lastKey = this._near.walletConnection._authData.allKeys[0]\n            // const lastKey = this._near.walletConnection._connectedAccount.connection.signer.keyStore.localStorage['near-api-js:keystore:' + this._near.accountId + ':' + NearConfig.networkId]\n            const lastKey = (await this._near.walletConnection._keyStore.getKey(NearConfig.networkId, this._near.accountId)).getPublicKey().toString()\n\n            console.log('all keys', accessKeys)\n            console.log('all local keys', this._near.walletConnection._authData.allKeys)\n            console.log('last key', lastKey)\n\n            for (let index = 0; index < accessKeys.length; index++) {\n              if (lastKey !== accessKeys[index].public_key) {\n                console.log('deleting ', accessKeys[index])\n                await account.deleteKey(accessKeys[index].public_key)\n                console.log('deleting ', accessKeys[index], 'done')\n              }\n            }\n\n            const offerResult = await this._near.contract.offer({ profile_id: favorAccountId }, '200000000000000', String(parseInt(0.3 * 1e9)) + '000000000000000')\n            console.log('offer result', offerResult)\n\n            const state = await account.state()\n            console.log(state)\n\n            const data = await fetch(NearConfig.wasmCode)\n            console.log('!', data)\n            const buf = await data.arrayBuffer()\n\n            await account.deployContract(new Uint8Array(buf))\n\n            const contract = await new nearAPI.Contract(account, this._near.accountId, {\n              viewMethods: [],\n              changeMethods: ['lock'],\n              sender: this._near.accountId\n            })\n            console.log('Deploying done. Initializing contract...')\n            console.log(await contract.lock(Buffer.from('{\"owner_id\":\"' + NearConfig.contractName + '\"}')))\n            console.log('Init is done.')\n\n            console.log('code hash', (await account.state()).code_hash)\n\n            console.log('deleting marketplace key', this._near.marketPublicKey)\n            await account.deleteKey(this._near.marketPublicKey)\n            console.log('deleting ', this._near.marketPublicKey, 'done')\n\n            console.log('deleting last key', lastKey)\n            await account.deleteKey(lastKey)\n            console.log('deleting ', lastKey, 'done')\n\n            this.setState({ offerFinished: true, offerSuccess: true })\n          }\n          this._near.logOut()\n        } catch (e) {\n          this.setState({ offerFinished: true, offerSuccess: false })\n          console.log('Error', e)\n        }\n      }\n    }\n  }\n\n  async requestSignIn (e) {\n    e && e.preventDefault()\n    const appTitle = 'Accounts Marketplace'\n    await this._near.walletConnection.requestSignIn(\n      NearConfig.contractName,\n      appTitle\n    )\n    return false\n  }\n\n  render () {\n    const passProps = {\n      _near: this._near,\n      refreshAllowance: () => this._near.refreshAllowance(),\n      ...this.state\n    }\n    const header = !this.state.connected ? (\n      <div>Connecting... <span className='spinner-grow spinner-grow-sm' role='status' aria-hidden='true' /></div>\n    ) : (this.state.signedIn ? (\n      <div>\n        <button\n          className='btn btn-outline-secondary'\n          onClick={() => this._near.logOut()}\n        >Sign out ({this.state.signedAccountId})\n        </button>\n      </div>\n    ) : (\n      <div>\n        <button\n          className='btn btn-warning'\n          onClick={(e) => this.requestSignIn(e)}\n        >Sign in with NEAR Wallet\n        </button>\n      </div>\n    ))\n\n    return (\n      <div className='App text-white' style={{ backgroundColor: '#2F2F2F' }}>\n        <Router basename={process.env.PUBLIC_URL}>\n          <nav className='navbar navbar-expand-lg navbar-dark mb-3' style={{ backgroundColor: '#2F2F2F' }}>\n            <div className='container-fluid'>\n              <Link className='navbar-brand' to='/' title='near.bet'>\n                <img src={Logo} alt='NEAR Accounts Marketplace' className='d-inline-block align-middle' style={{ opacity: 0.85 }} />\n                [BETA] Marketplace\n              </Link>\n              <button\n                className='navbar-toggler' type='button' data-bs-toggle='collapse'\n                data-bs-target='#navbarSupportedContent' aria-controls='navbarSupportedContent'\n                aria-expanded='false' aria-label='Toggle navigation'\n              >\n                <span className='navbar-toggler-icon' />\n              </button>\n              <div className='collapse navbar-collapse' id='navbarSupportedContent'>\n                <ul className='navbar-nav me-auto mb-2 mb-lg-0'>\n                  <li className='nav-item'>\n                    <Link className='nav-link' aria-current='page' to='/bets'>Market</Link>\n                  </li>\n                  {this.state.signedIn && (\n                    <li className='nav-item'>\n                      <Link\n                        className='nav-link' aria-current='page'\n                        to={`/profile/${this.state.signedAccountId}`}\n                      >Profile\n                      </Link>\n                    </li>\n                  )}\n                  <li className='nav-item'>\n                    <Link className='nav-link' aria-current='page' to='/offer'>Offer</Link>\n                  </li>\n                  <li className='nav-item'>\n                    <Link className='nav-link' aria-current='page' to='/rules'>Rules</Link>\n                  </li>\n                </ul>\n                <form className='d-flex'>\n                  {header}\n                </form>\n              </div>\n            </div>\n          </nav>\n\n          <a\n            className='github-fork-ribbon right-bottom fixed' href='https://github.com/kouprin/accounts-marketplace' data-ribbon='Fork me on GitHub'\n            title='Fork me on GitHub'\n          >Fork me on GitHub\n          </a>\n\n          <Switch>\n            <Route exact path='/'>\n              <LandingPage {...passProps} />\n            </Route>\n            <Route exact path='/bets'>\n              <BetsPage {...passProps} />\n            </Route>\n            <Route exact path='/claims'>\n              <ClaimsPage {...passProps} />\n            </Route>\n            <Route exact path='/rules'>\n              <RulesPage {...passProps} />\n            </Route>\n            <Route exact path='/offer'>\n              <OfferPage {...passProps} />\n            </Route>\n            <Route exact path='/offerProcess'>\n              <OfferProcessPage {...passProps} />\n            </Route>\n            <Route exact path='/profile/:profileId'>\n              <ProfilePage {...passProps} />\n            </Route>\n            <Route exact path='/bid/:bidId'>\n              <BidPage {...passProps} />\n            </Route>\n            <Route exact path='/acquire/:bidId'>\n              <AcquirePage {...passProps} />\n            </Route>\n          </Switch>\n        </Router>\n      </div>\n    )\n  }\n}\n\nexport default App\n","module.exports = __webpack_public_path__ + \"static/media/logo.485b5e4c.png\";","import React, { useState } from 'react'\nimport ls from 'local-storage'\n\nimport { fromNear, loader } from '../components/Helpers'\n\nfunction OfferPage (props) {\n  const accountSuffix = props._near.accountSuffix\n  const [offerButtonEnabled, setOfferButtonEnabled] = useState(true)\n\n  async function offerBid (e) {\n    e.preventDefault()\n    setOfferButtonEnabled(false)\n    const appTitle = 'Accounts Marketplace'\n    if (props.signedIn) {\n      props._near.logOut()\n    }\n    if (props.connected) {\n      const dotSuffix = '.' + props._near.accountSuffix\n      const offerInputValue = document.getElementById('offerInput').value\n      const favorInputValue = document.getElementById('rewardsInput').value\n      if (!offerInputValue || !favorInputValue) {\n        alert('Account(s) are empty')\n        setOfferButtonEnabled(true)\n        throw console.error('Account(s) are empty')\n      }\n      const offerAccountId = offerInputValue.endsWith(dotSuffix) ? offerInputValue : offerInputValue + dotSuffix\n      const favorAccountId = favorInputValue.endsWith(dotSuffix) ? favorInputValue : favorInputValue + dotSuffix\n      console.log('offerAccountId', offerAccountId)\n      console.log('favorAccountId', favorAccountId)\n      if (offerAccountId === favorAccountId) {\n        alert('Accounts must be different')\n        setOfferButtonEnabled(true)\n        throw console.error('Accounts must be different')\n      }\n      const account = await props._near.near.account(offerAccountId)\n      let balance = null\n      try {\n        balance = fromNear((await account.getAccountBalance()).total)\n      } catch (e) {\n        alert('Account not exist - you have to create it first')\n        setOfferButtonEnabled(true)\n        throw console.error('Account not exist - you have to create it first')\n      }\n      console.log(balance)\n\n      if (balance < 2.03) {\n        alert('Not enough balance - should be at least 2 NEAR available (2.05 total usually works)')\n        setOfferButtonEnabled(true)\n        throw console.error('Not enough balance - should be at least 2 NEAR available')\n      }\n      const accessKeys = await account.getAccessKeys()\n      ls.set(props._near.lsPrevKeys, accessKeys)\n      ls.set(props._near.lsFavorAccountId, favorAccountId)\n      ls.set(props._near.lsOfferAccountId, offerAccountId)\n\n      // adding random Full Access Key\n      await props._near.walletConnection.requestSignIn(\n        '',\n        appTitle,\n        window.location.origin + '/#/offerProcess',\n        window.location.origin + '/#/offer'\n      )\n    }\n  }\n\n  return (\n    <div className='container my-auto'>\n      <h1 className='text-center'>Offer your account</h1>\n      <h2 className='text-center'>\n                Here you can offer your account to the Market.\n                Choose an account to transfer all rewards after claiming your account.\n      </h2>\n      <form onSubmit={(e) => offerBid(e)}>\n        <div className='d-flex align-items-center justify-content-center'>\n          <div className='form-group' style={{ width: '400px', margin: '25px' }}>\n            <label htmlFor='exampleInputEmail1'>Account you offer</label>\n            <div className={'account-suffix account-suffix-' + accountSuffix}>\n              <input\n                type='text' className='form-control mt-2' id='offerInput'\n                placeholder='Example: satoshi'\n              />\n            </div>\n            <small id='emailHelp' className='form-text text-muted'>All your access keys will be removed</small>\n            <div style={{ margin: '25px' }} />\n            <label htmlFor='exampleInputEmail1'>Account which takes rewards</label>\n            <div className={'account-suffix account-suffix-' + accountSuffix}>\n              <input\n                type='text' className='form-control mt-2' id='rewardsInput'\n                placeholder='Example: vitalik'\n              />\n            </div>\n            <small id='emailHelp' className='form-text text-muted'>All rewards will be transferred to this account</small>\n            <br />\n            {offerButtonEnabled ? (<button className='btn btn-outline-warning mt-5 w-100'>Offer</button>) : (loader())}\n          </div>\n        </div>\n      </form>\n    </div>\n  )\n}\n\nexport default OfferPage\n","import React from 'react'\n\nimport { loader } from '../components/Helpers'\n\nfunction OfferProcessPage (props) {\n  let finished = false\n  let success = false\n  if (props.connected) {\n    finished = props.offerFinished\n    success = props.offerSuccess\n  }\n\n  return (\n    <div className='container my-auto'>\n      <h1 className='text-center'>Offer processing</h1>\n      {finished\n        ? (success\n          ? (\n            <h2 className='alert alert-success' role='alert'>\n            Success!\n            </h2>\n          ) : (\n            <h2 className='alert alert-danger' role='alert'>\n            Something went wrong\n            </h2>\n          )\n        ) : (\n          <div>\n            <div style={{ margin: '25px' }} />\n            {loader()}\n            <h2 className='alert alert-warning' role='alert'>\n            Do not refresh or close the page\n            </h2>\n\n            <h2 className='alert alert-secondary' role='alert'>\n            It may take up to 5 minutes to complete\n            </h2>\n          </div>\n        )}\n\n    </div>\n  )\n}\n\nexport default OfferProcessPage\n","import React from 'react'\nimport useSWR from 'swr'\n\nimport { mapStats, rules } from '../components/Helpers'\n\nfunction StatsPage (props) {\n  const fetchStats = async (...args) => {\n    return mapStats(await props._near.contract.get_global_stats())\n  }\n\n  const { data: stats } = useSWR('global_stats', fetchStats, { errorRetryInterval: 500 })\n\n  return (\n    <div className='container'>\n      <div className='row'>\n        {!stats ? (\n          <div className='col'>\n            <div className='d-flex justify-content-center'>\n              <div className='spinner-grow' role='status'>\n                <span className='visually-hidden'>Loading...</span>\n              </div>\n            </div>\n          </div>\n        ) : (\n          <div className='col col-12 col-lg-8 col-xl-8'>\n            {rules()}\n            <div>\n              <h3>Global Stats</h3>\n              <ul>\n                <li>Active profiles: {stats.numProfiles}</li>\n                <li>Bids: {stats.numBids}</li>\n                <li>Bids on claim: {stats.numBidsOnClaim}</li>\n                <li>Number of offers: {stats.numOffers}</li>\n                <li>Number of bets: {stats.numBets}</li>\n                <li>Number of claims: {stats.numClaims}</li>\n                <li>Number of acquisitions (successful claims): {stats.numAcquisitions}</li>\n                <li>Total commission: {stats.totalCommission.toFixed(2)}</li>\n              </ul>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n\nexport default StatsPage\n","import React, { useState } from 'react'\nimport { useParams } from 'react-router'\nimport { Link } from 'react-router-dom'\nimport useSWR, { mutate } from 'swr'\n\nimport { BidPreview } from '../components/BidPreview'\nimport { qq, mapProfile } from '../components/Helpers'\n\nfunction ProfilePage (props) {\n  const { profileId } = useParams()\n  const [claimsOnly, setClaimsOnly] = useState(false)\n  const [showRewardsButton, setShowRewardsButton] = useState(true)\n\n  async function grabRewards (e) {\n    e.preventDefault()\n    setShowRewardsButton(false)\n    lowRewards = true\n    profile.profitTaken += profile.availableRewards\n    profile.availableRewards = 0\n    await mutate(['profile_id', profileId], profile, false)\n    props._near.contract.collect_rewards({}, '200000000000000', 0)\n    setShowRewardsButton(true)\n  }\n\n  const fetchProfile = async (...args) => {\n    return mapProfile(await props._near.contract.get_profile({ profile_id: args[1] }))\n  }\n\n  const { data: profile } = useSWR(['profile_id', profileId], fetchProfile, { errorRetryInterval: 500 })\n\n  let acquisitions = null\n  let participation = null\n  if (props.connected && !!profile) {\n    acquisitions = profile.acquisitions.map((bidId) => {\n      return (\n        <BidPreview {...props} key={bidId} bidId={bidId} />\n      )\n    })\n    participation = profile.participation.map((bidId) => {\n      return (\n        <BidPreview {...props} key={bidId} bidId={bidId} />\n      )\n    })\n  }\n\n  const loader = (\n    <div className='d-flex justify-content-center' key='loader'>\n      <div className='spinner-grow' role='status'>\n        <span className='visually-hidden'>Loading...</span>\n      </div>\n    </div>\n  )\n\n  let lowRewards = profile && profile.availableRewards < 0.1\n  const useMyGreen = lowRewards ? '' : 'my-green-big'\n\n  return props.connected && profile ? (\n    <div>\n      <div className='container g-0 px-5'>\n        <div className='d-flex flex-row bd-highlight mb-3'>\n          <div className='py-2 bd-highlight my-gray'>\n            <h5>{qq} profile</h5>\n          </div>\n          <div className='p-2 bd-highlight' />\n          <div className='p-2 bd-highlight'>\n            <h5>{qq} {profileId}</h5>\n          </div>\n        </div>\n        <div className='mb-3 py-2'>\n          <h4>Stats</h4>\n        </div>\n\n        <div className='row'>\n          <div className='col-2' style={{ minWidth: '200px' }}>\n            Bets volume:\n          </div>\n          <div className='col-2' style={{ minWidth: '200px' }}>\n            {profile.betsVolume.toFixed(2)} NEAR\n          </div>\n        </div>\n        <div className='row'>\n          <div className='col-2' style={{ minWidth: '200px' }}>\n          Profit taken:\n          </div>\n          <div className='col-2' style={{ minWidth: '200px' }}>\n            {profile.profitTaken.toFixed(2)} NEAR\n          </div>\n        </div>\n        <div className='row justify-content-start'>\n          <div className='col-2' style={{ minWidth: '200px' }}>\n          Available rewards:\n          </div>\n          <div className={`col-2 ${useMyGreen}`} style={{ minWidth: '200px' }}>\n            {profile.availableRewards.toFixed(2)} NEAR\n          </div>\n        </div>\n        {profileId === props.signedAccountId ? (\n          <div style={{ marginTop: '25px', maxWidth: '320px' }}>\n            {showRewardsButton ? (\n              <button\n                className='btn btn-warning w-100'\n                disabled={lowRewards}\n                onClick={(e) => grabRewards(e)}\n              >Collect rewards\n              </button>\n            ) : (loader)}\n            {lowRewards && <div><small className='gray'>Accumulate at least 0.1 NEAR to collect rewards</small></div>}\n          </div>\n        ) : (<div />)}\n        <div style={{ marginTop: '25px' }} />\n        <div>\n          <small className='gray'>Number of offers: {profile.numOffers}</small>\n        </div>\n        <div>\n          <small className='gray'>Number of bets: {profile.numBets}</small>\n        </div>\n        <div>\n          <small className='gray'>Number of claims: {profile.numClaims}</small>\n        </div>\n        <div>\n          <small className='gray'>Number of acquisitions (successful claims): {profile.numAcquisitions}</small>\n        </div>\n        <hr />\n      </div>\n\n      <div className='container g-0 px-5'>\n        <div className='d-flex flex-row bd-highlight mb-3'>\n          <div className='py-2 bd-highlight'>\n            {claimsOnly\n              ? <h5><Link className='navigate' to='#' onClick={(e) => { e.preventDefault(); setClaimsOnly(false) }}>Participating ({profile.participation.length})</Link></h5>\n              : <h5 className='nonavigate'>Participating ({profile.participation.length})</h5>}\n          </div>\n          <div className='p-2 bd-highlight' />\n          <div className='p-2 bd-highlight'>\n            {claimsOnly\n              ? <h5 className='nonavigate'>Successful claims ({profile.acquisitions.length})</h5>\n              : <h5><Link className='navigate' to='#' onClick={(e) => { e.preventDefault(); setClaimsOnly(true) }}>Successful claims ({profile.acquisitions.length})</Link></h5>}\n          </div>\n        </div>\n      </div>\n      <div className='container g-0 px-5'>\n        {claimsOnly ? (\n          acquisitions || loader\n        ) : (\n          participation || loader\n        )}\n      </div>\n    </div>\n  ) : (loader)\n}\n\nexport default ProfilePage\n","import React, { useState } from 'react'\nimport { useParams } from 'react-router'\nimport { generateSeedPhrase, parseSeedPhrase } from 'near-seed-phrase'\n// import { Link } from 'react-router-dom'\n\nimport { loader } from '../components/Helpers'\n\nfunction AcquirePage (props) {\n  const { bidId } = useParams()\n  const [showAcquireButtons, setShowAcquireButtons] = useState(true)\n  const [acquireSuccess, setAcquireSuccess] = useState(false)\n  const [seedPhrase, setSeedPhrase] = useState(generateSeedPhrase().seedPhrase)\n  const [showSeedPhrase, setShowSeedPhrase] = useState(false)\n\n  async function acquireBidSeedPhrase (e) {\n    e.preventDefault()\n    setShowAcquireButtons(false)\n    const clickSeedPhrase = document.getElementById('acquireSeedPhrase').value\n    console.log(clickSeedPhrase)\n    const publicKey = parseSeedPhrase(clickSeedPhrase, '').publicKey\n    console.log(publicKey)\n    await props._near.contract.acquire({ bid_id: bidId, new_public_key: publicKey }, '200000000000000', '0')\n    setSeedPhrase(clickSeedPhrase)\n    setShowSeedPhrase(true)\n    setAcquireSuccess(true)\n  }\n\n  async function acquireBidPublicKey (e) {\n    e.preventDefault()\n    setShowAcquireButtons(false)\n    const publicKey = document.getElementById('acquirePublicKey').value\n    console.log(publicKey)\n    await props._near.contract.acquire({ bid_id: bidId, new_public_key: publicKey }, '200000000000000', '0')\n    setAcquireSuccess(true)\n  }\n\n  const recoverLink = props._near.config.walletUrl + '/recover-seed-phrase'\n  // React bug:\n  // <Link to={seedPhraseLink}>Go to the NEAR wallet and copy your seed phrase</Link> interprets as relative path\n\n  return !acquireSuccess ? (\n    <div className='container my-auto'>\n      <h1 className='text-center'>Acquire {bidId}</h1>\n      <h2 className='text-center'>\n                Do it easy way or like a pro?\n      </h2>\n      <hr />\n      <form onSubmit={(e) => acquireBidSeedPhrase(e)}>\n        <h3 className='text-center'>Use a seed phrase</h3>\n        <div className='d-flex align-items-center justify-content-center'>\n          <div className='form-group' style={{ width: '600px', margin: '25px' }}>\n            <div>Save this randomly generated seed phrase or choose your own</div>\n            <div>\n              <input\n                type='text' className='form-control mt-2' id='acquireSeedPhrase'\n                placeholder='Example: van honey cattle trend garbage human cereal donor pipe you response gym '\n                defaultValue={seedPhrase}\n              />\n            </div>\n            {props.connected && showAcquireButtons ? (\n              <button disabled={!props.signedIn} className='btn btn-outline-warning my-3 w-100'>Acquire using seed phrase</button>\n            ) : (\n              <div className='my-3 w-100'>{loader()}</div>)}\n          </div>\n        </div>\n      </form>\n      <hr />\n      <form onSubmit={(e) => acquireBidPublicKey(e)}>\n        <h3 className='text-center'>or &mdash; Transfer your public key</h3>\n        <div className='d-flex align-items-center justify-content-center'>\n          <div className='form-group' style={{ width: '600px', margin: '25px' }}>\n            <label htmlFor='exampleInputEmail1'>Put your base58 public key</label>\n            <div>\n              <input\n                type='text' className='form-control mt-2' id='acquirePublicKey'\n                placeholder='Example: 9bk1tm45X2hBSffmD65pA2vch862jtcz75mkRR7MXNVj'\n              />\n            </div>\n            {props.connected && showAcquireButtons ? (\n              <button disabled={!props.signedIn} className='btn btn-outline-warning my-3 w-100'>Acquire using new public key</button>\n            ) : (\n              <div className='my-3 w-100'>{loader()}</div>)}\n          </div>\n        </div>\n      </form>\n    </div>\n  ) : (\n    <div className='container my-auto'>\n      <h1 className='text-center'>Acquire {bidId}</h1>\n      <h2 className='alert alert-success' role='alert'>\n            Contract instruction has been sent.\n      </h2>\n      {showSeedPhrase && <div><h2>Seed phrase used:</h2><h2 className='alert alert-info' role='alert'>{seedPhrase}</h2></div>}\n      {showSeedPhrase &&\n        <h2>Go to <a href={recoverLink}>wallet</a> and restore your account\n        </h2>}\n    </div>\n  )\n}\n\nexport default AcquirePage\n","import './Landing.scss'\n\nimport React from 'react'\nimport { Image } from 'react-bootstrap'\nimport { Link } from 'react-router-dom'\n\nimport BackgroundImage from '../images/lines.png'\nimport Croco from '../images/croco.png'\nimport Croco2 from '../images/croco2.png'\nimport FoundersImage from '../images/founders.svg'\nimport BelieversImage from '../images/believers.svg'\nimport ClaimersImage from '../images/claimers.svg'\nimport { qq } from '../components/Helpers'\n\nfunction LandingPage (props) {\n  var background = { backgroundSize: 'cover', backgroundRepeat: 'no-repeat', position: 'absolute', opacity: 0.4 }\n  var backgroundCroco = { opacity: 0.7 }\n  var backgroundCroco2 = { backgroundSize: 'cover', backgroundRepeat: 'no-repeat', position: 'absolute', opacity: 0.4, width: '25%', left: '20%', top: '33%' }\n  var image = { width: '64px' }\n  return (\n    <div\n      className='container my-auto'\n    >\n      <Image\n        style={background} fluid\n        src={BackgroundImage}\n      />\n      <Image\n        style={backgroundCroco2} fluid\n        src={Croco2}\n      />\n      <div style={{ margin: '5%' }} />\n      <div className='container content'>\n        <div className='row justify-content-evenly'>\n          <div className='col-2' />\n\n          <div className='col-6'>\n            <div className='huge'>{qq} The easiest way to get a cool account name :)</div>\n            <div style={{ margin: '15%' }} />\n          </div>\n        </div>\n      </div>\n      <div className='text-center'>\n        <h3>\n                           For whom NEAR Accounts Marketplace has been built?\n        </h3>\n      </div>\n      <div style={{ margin: '5%' }} />\n      <section className='features-icons text-center det-ails'>\n        <div className='container'>\n          <div className='row'>\n            <div className='col-lg-4'>\n              <div className='features-icons-item mx-auto mb-5 mb-lg-0 mb-lg-3'>\n                <div className='position-relative py-5'>\n                  <div className='top-50 start-50  py-3 px-3 translate-middle' style={{ borderRadius: '50%', position: 'absolute', backgroundColor: '#616E5C' }}>\n                    <Image\n                      class='position-absolute'\n                      fluid\n                      src={FoundersImage}\n                      style={image}\n                    />\n                  </div>\n                </div>\n                <h3 className='py-3'>Founders</h3>\n                <h2 className='gray'>Find brilliant account names and place them onto the market for rewards</h2>\n              </div>\n            </div>\n            <div className='col-lg-4'>\n              <div className='features-icons-item mx-auto mb-5 mb-lg-0 mb-lg-3'>\n                <div className='position-relative py-5'>\n                  <div className='top-50 start-50  py-3 px-3 translate-middle' style={{ borderRadius: '50%', position: 'absolute', backgroundColor: '#616E5C' }}>\n                    <Image\n                      class='position-absolute'\n                      fluid\n                      src={BelieversImage}\n                      style={image}\n                    />\n                  </div>\n                </div>\n                <h3 className='py-3'>Believers</h3>\n                <h2 className='gray'>Participate in finding fair price, earn for your faithful evaluation and wisdom</h2>\n              </div>\n            </div>\n            <div className='col-lg-4'>\n              <div className='features-icons-item mx-auto mb-0 mb-lg-3'>\n                <div className='position-relative py-5'>\n                  <div className='top-50 start-50  py-3 px-3 translate-middle' style={{ borderRadius: '50%', position: 'absolute', backgroundColor: '#616E5C' }}>\n                    <Image\n                      class='position-absolute'\n                      fluid\n                      src={ClaimersImage}\n                      style={image}\n                    />\n                  </div>\n                </div>\n                <h3 className='py-3'>Claimers</h3>\n                <h2 className='gray'>Obtain perfect account names for inner usage, personal collection or further resale</h2>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n      <div className='container'>\n        <div className='row'>\n          <div className='col-1' />\n          <div className='col-lg-4'>\n            <h1 className='pt-3'>{qq} Two basic operations about account names of the Marketplace </h1>\n            <div className='text-center'>\n              <Link className='btn btn-lg btn-secondary mt-3' to='/rules'>Dive into rules</Link>\n            </div>\n          </div>\n          <div className='col-lg-6'>\n            <div className='row align-items-center my-5'>\n              <div className='col-3'>\n                <h3>Bet:</h3>\n              </div>\n              <div className='col py-3'>\n                <h5 className='gray'>if you guess the account name is undervalued and will be claimed for higher price &mdash; it brings you up to 50% profit </h5>\n              </div>\n            </div>\n            <div className='row align-items-center'>\n              <div className='col-3'>\n                <h3>Claim:</h3>\n              </div>\n              <div className='col py-3'>\n                <h5 className='gray'>if you want to obtain the account name for yourself and no one will overbid you in the next 72 hours </h5>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div className='container text-center' style={{ paddingTop: '10vh', paddingBottom: '50vh' }}>\n        <h1>{qq} Interested?</h1>\n        <div className='row justify-content-evenly align-items-center'>\n          <div className='col-1' />\n          <div className='col-3 pt-5'>\n            <Image\n              style={backgroundCroco} fluid\n              src={Croco}\n            />\n            <h5>Gimme that account!</h5>\n          </div>\n          <div className='col-3 pb-5'>\n            <Link className='btn btn-lg btn-success mt-3' to='/bets'>Jump to the market</Link>\n          </div>\n          <div className='col-1' />\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default LandingPage\n","module.exports = __webpack_public_path__ + \"static/media/lines.f8742393.png\";","module.exports = __webpack_public_path__ + \"static/media/croco.485b5e4c.png\";","module.exports = __webpack_public_path__ + \"static/media/croco2.ca0e49d1.png\";","module.exports = __webpack_public_path__ + \"static/media/founders.aa441f4a.svg\";","module.exports = __webpack_public_path__ + \"static/media/believers.574e193f.svg\";","module.exports = __webpack_public_path__ + \"static/media/claimers.a043f265.svg\";","import React from 'react'\nimport { Link } from 'react-router-dom'\n\nimport { fromNear } from './Helpers'\n\nfunction BetButton (props) {\n  const betPrice = props.bidInfo.betPrice\n  const forfeit = props.bidInfo.forfeit\n  const totalBetPrice = fromNear(betPrice) + fromNear(forfeit)\n  async function betBid (e) {\n    e.preventDefault()\n    console.log(String(totalBetPrice * 1e9) + '000000000000000')\n    // TODO\n    if (forfeit < 0.001) {\n      await props._near.contract.bet({ bid_id: props.bidId }, '200000000000000', String(parseInt((totalBetPrice + 1e-5) * 1e9)) + '000000000000000')\n    } else {\n      await props._near.contract.bet({ bid_id: props.bidId }, '200000000000000', String(parseInt((totalBetPrice + 1e-5) * 1.001 * 1e9)) + '000000000000000')\n    }\n  }\n\n  return (\n    <button\n      className='btn btn-success w-100 mb-2'\n      disabled={!props.signedIn || !props.isSafe}\n      onClick={(e) => betBid(e)}\n    >\n        Bet for {totalBetPrice.toFixed(6)} NEAR\n    </button>\n  )\n}\n\nfunction ClaimButton (props) {\n  const claimedBy = props.bidInfo.claimedBy\n  const claimPrice = fromNear(props.bidInfo.claimPrice)\n  async function claimBid (e) {\n    e.preventDefault()\n    console.log(String(claimPrice * 1e9) + '000000000000000')\n    // TODO\n    await props._near.contract.claim({ bid_id: props.bidId }, '200000000000000', String(parseInt((claimPrice + 1e-5) * 1e9)) + '000000000000000')\n  }\n\n  return (\n    !claimedBy ? (\n      <button\n        className='btn btn-warning w-100'\n        disabled={!props.signedIn || !props.isSafe}\n        onClick={(e) => claimBid(e)}\n      >\n        Claim for {claimPrice.toFixed(6)} NEAR\n      </button>\n    ) : (\n      <button\n        className='btn btn-outline-warning w-100'\n        disabled\n      >\n        Already claimed - you can only bet\n      </button>\n    )\n  )\n}\n\nfunction FinalizeButton (props) {\n  async function finalizeBid (e) {\n    // e.preventDefault()\n    await props._near.contract.finalize({ bid_id: props.bidId }, '200000000000000', '0')\n  }\n\n  const toOfferPage = props.signedIn && props.bidInfo && props.signedAccountId && (props.signedAccountId === props.bidInfo.claimedBy)\n  const disabled = !props.signedIn || !props.isSafe\n\n  return !disabled ? (\n    <Link to={toOfferPage ? (`/acquire/${props.bidId}`) : (`/profile/${props.signedAccountId}`)} className='btn btn-warning w-100' onClick={(e) => finalizeBid(e)}>\n          Finalize\n    </Link>\n  ) : (\n    <button\n      className='btn btn-warning w-100'\n      disabled\n    >\n    Finalize\n    </button>\n  )\n}\n\nfunction AcquireButton (props) {\n  return (\n    <Link\n      className='btn btn-warning w-100'\n      to={`/acquire/${props.bidId}`}\n    >Acquire\n    </Link>\n  )\n}\n\nexport { BetButton, ClaimButton, FinalizeButton, AcquireButton }\n","import React from 'react'\nimport { useParams } from 'react-router'\nimport { Contract } from 'near-api-js'\nimport Moment from 'react-moment'\nimport { Link } from 'react-router-dom'\nimport useSWR from 'swr'\n\nimport { BetButton, ClaimButton, FinalizeButton, AcquireButton } from '../components/BidActions'\nimport { qq, loader, mapBidInfo, mapProfile } from '../components/Helpers'\n\nfunction BidPage (props) {\n  const { bidId } = useParams()\n\n  const fetchBid = async (...args) => {\n    return mapBidInfo(await props._near.contract.get_bid({\n      bid_id: args[1]\n    }))\n  }\n\n  const fetchBidSafety = async (...args) => {\n    const bidId = args[1]\n    const account = await props._near.near.account(bidId)\n    try {\n      const codeHash = (await account.state()).code_hash\n      const accessKeysLen = (await account.getAccessKeys()).length\n      const lockerContract = await new Contract(account, bidId, {\n        viewMethods: ['get_owner'],\n        changeMethods: []\n      })\n      const lockerOwner = await lockerContract.get_owner({})\n      return { codeHash, accessKeysLen, lockerOwner }\n    } catch (e) {\n      console.log('check safety error', e)\n    }\n    return { codeHash: '(unknown)', accessKeysLen: '(unknown)', lockerOwner: '(not found)' }\n  }\n\n  const { data: bidInfo } = useSWR(['bid_id', bidId], fetchBid, { errorRetryInterval: 250 })\n  const { data: bidSafety } = useSWR(['bid_id_safety', bidId], fetchBidSafety, { errorRetryInterval: 1000 })\n\n  const isReady = !!bidInfo && !!bidSafety\n\n  const isSafe = isReady &&\n  (!bidInfo.isAtMarket ||\n  (bidSafety.codeHash === 'DKUq738xnns9pKjpv9GifM68UoFSmfnBYNp3hsfkkUFa' &&\n  bidSafety.accessKeysLen === 0 &&\n  bidSafety.lockerOwner === props._near.config.contractName))\n\n  let claimedTime = null\n  let timeLeft = null\n  if (bidInfo) {\n    timeLeft = parseInt(bidInfo.claimedTime / 1000000)\n    claimedTime = new Intl.DateTimeFormat('UK', { year: 'numeric', month: '2-digit', day: '2-digit', hour: '2-digit', minute: '2-digit', second: '2-digit' }).format(timeLeft)\n  }\n\n  const founder = bidInfo && bidInfo.bets && bidInfo.bets[0]\n  const believers = bidInfo && bidInfo.bets && bidInfo.bets.slice(1).map((data, index) => {\n    return (\n      <div key={index} className='row'>\n        <div className='col-2' style={{ minWidth: '200px' }}>\n          <Link className='nonavigate' to={`/profile/${data}`}>{data}</Link>\n        </div>\n        <div className='col-2' style={{ minWidth: '200px' }}>\n          {(1.25 * Math.pow(1.2, index)).toFixed(2)} NEAR\n        </div>\n      </div>\n    )\n  })\n\n  const fetchProfile = async (...args) => {\n    return mapProfile(await props._near.contract.get_profile({ profile_id: args[1] }))\n  }\n\n  const { data: profile } = useSWR(['profile_id', props._near.accountId], fetchProfile, { errorRetryInterval: 500 })\n\n  // TESTS\n  // no safe\n  // if (bidInfo) { isSafe = false }\n  // bet & claim\n  // if (bidInfo) { bidInfo.claimedBy = null; bidInfo.isAtMarket = true; bidInfo.isOnAcquisition = false; profile.acquisitions = [] }\n  // only bet\n  // if (bidInfo) { bidInfo.claimedBy = 'profile.near'; bidInfo.isAtMarket = true; bidInfo.isOnAcquisition = false; profile.acquisitions = [] }\n  // finalize\n  // if (bidInfo) { bidInfo.claimedBy = 'profile.near'; bidInfo.isAtMarket = true; bidInfo.isOnAcquisition = true; profile.acquisitions = [] }\n  // acquire\n  // if (bidInfo) { bidInfo.claimedBy = 'kpr.testnet'; bidInfo.isAtMarket = false; bidInfo.isOnAcquisition = true; profile.acquisitions = ['blab.testnet'] }\n  // claimed by someone\n  // if (bidInfo) { bidInfo.claimedBy = 'profile.near'; bidInfo.isAtMarket = false; bidInfo.isOnAcquisition = true; profile.acquisitions = [] }\n  // no\n  // if (bidInfo) { bidInfo.claimedBy = null; bidInfo.isAtMarket = false; bidInfo.isOnAcquisition = false; profile.acquisitions = [] }\n\n  let isMine = false\n  if (props.signedIn && profile) {\n    profile.acquisitions.forEach(profileBidId => {\n      if (bidId === profileBidId) {\n        isMine = true\n      }\n    })\n  }\n\n  const showBetClaim = bidInfo && bidInfo.isAtMarket && !bidInfo.isOnAcquisition\n  const showFinalize = bidInfo && bidInfo.isAtMarket && bidInfo.isOnAcquisition\n  const showAcquire = bidInfo && !bidInfo.isAtMarket && isMine\n\n  Moment.startPooledTimer(1000)\n\n  return props.connected && isReady ? (\n    <div>\n      <div className='container g-0 px-5'>\n        <div className='d-flex flex-row bd-highlight mb-3'>\n          <div className='py-2 bd-highlight my-gray'>\n            <h5>{qq} bid</h5>\n          </div>\n          <div className='p-2 bd-highlight' />\n          <div className='p-2 bd-highlight'>\n            <h5>{qq} {bidId}</h5>\n          </div>\n        </div>\n\n        {!isSafe ? (\n          <div className='mb-3 py-2'>\n            <h4>Account is not considered safe. What does it mean?</h4>\n            <div className='pb-4'>You are suggested not to participate with the bid.</div>\n            <div>The validation consist of three steps to make sure everything is going properly under smart contract rules:</div>\n            <li className='small'>There must be a contract deployed onto the bid with hash equal to \"DKUq738xnns9pKjpv9GifM68UoFSmfnBYNp3hsfkkUFa\"</li>\n            <li className='small'>There must be no access keys</li>\n            <li className='small'>Owner of the locker must be equal to the account of the Marketplace {props._near.config.contractName}</li>\n            <div className='py-4'>The following conditions are found:</div>\n            <li className='small'>Hash of the contract is \"{bidSafety.codeHash}\"</li>\n            <li className='small'>There are {bidSafety.accessKeysLen} keys found</li>\n            <li className='small'>Owner of the locker is {bidSafety.lockerOwner}</li>\n          </div>\n        ) : (\n          <div>\n            <div>\n              {bidInfo.claimedBy ? (\n                <div className='mb-3 py-2'>\n                  <div>Claimed by <Link className='nonavigate' to={`/profile/${bidInfo.claimedBy}`}>{bidInfo.claimedBy}</Link></div>\n                  <small className='gray'>Claimed time: {claimedTime}</small>\n\n                  {showBetClaim ? (\n                    <div className='d-flex flex-row bd-highlight mt-3'>\n                      <div className='py-2 bd-highlight'>Will be successfully claimed after</div>\n                      <div className='p-2 bd-highlight' />\n                      <div className='p-2 bd-highlight my-green-big h5'>\n                        <Moment date={timeLeft} format='hh:mm:ss' add={{ seconds: props._near.claimPeriod }} durationFromNow />\n                      </div>\n                    </div>\n                  ) : (<div />)}\n\n                </div>\n              ) : (bidInfo.isAtMarket ? <div className='mb-3 py-2'>Not claimed yet</div> : <div className='mb-3 py-2'>Not here yet. Is it a good fit?</div>)}\n            </div>\n\n            <div style={{ maxWidth: '400px' }}>\n              {showBetClaim && <BetButton {...props} bidId={bidId} bidInfo={bidInfo} isSafe={isSafe} />}\n              {showBetClaim && <ClaimButton {...props} bidId={bidId} bidInfo={bidInfo} isSafe={isSafe} />}\n              {showFinalize && <FinalizeButton {...props} bidId={bidId} bidInfo={bidInfo} isSafe={isSafe} />}\n              {showAcquire && <AcquireButton {...props} bidId={bidId} bidInfo={bidInfo} isSafe={isSafe} />}\n            </div>\n            <hr />\n            {showBetClaim &&\n              <div className='small'>\n                <div className='pb-2'>What do the buttons mean?</div>\n                <div className='gray'>When you believe the bid is underestimated and will be claimed for higher price, choose «Bet» option. </div>\n                <div className='gray'>You will receive rewards for each bet on top of yours, or for successful claim &mdash; up to 50%.  </div>\n                <div className='gray pt-2'>When you want to claim the bid, choose «Claim» option.</div>\n                <div className='gray'>If no one overbid you in the next 72 hours, the bid will be yours.</div>\n                <div className='gray pt-2'>Dive into <Link to='/rules'>the rules</Link> for more details.</div>\n                <hr />\n              </div>}\n            {bidInfo.isAtMarket &&\n              <div>\n                <div className='mb-3 py-2'>\n                  <h5>Competitors</h5>\n                </div>\n                <div className='mb-2'>\n                  <div>Founded by: <Link className='nonavigate' to={`/profile/${founder}`}>{founder}</Link></div>\n                </div>\n                {believers}\n              </div>}\n          </div>\n        )}\n      </div>\n\n    </div>\n  ) : (loader())\n}\n\nexport default BidPage\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n","import React from 'react'\n\nconst fromNear = (s) => parseFloat(s) / 1e24 || 0\n\nconst qq = '//'\n\nfunction loader () {\n  return (\n  // key='1' is needed by InfiniteScroll\n    <div className='d-flex justify-content-center' key='1'>\n      <div className='spinner-grow' role='status'>\n        <span className='visually-hidden'>Loading...</span>\n      </div>\n    </div>\n  )\n}\n\nconst mapBidInfo = (b) => {\n  return b ? {\n    isAtMarket: true,\n    numClaims: b.num_claims,\n    claimedBy: b.claim_status ? b.claim_status[0] : null,\n    claimedTime: b.claim_status ? b.claim_status[1] : null,\n    bets: b.bets,\n    betPrice: b.bet_price,\n    claimPrice: b.claim_price,\n    forfeit: b.forfeit,\n    isOnAcquisition: b.on_acquisition\n  } : {\n    isAtMarket: false,\n    numClaims: 0,\n    claimedBy: null,\n    claimedTime: null,\n    bets: null,\n    betPrice: 0,\n    claimPrice: 0,\n    forfeit: null,\n    isOnAcquisition: false\n  }\n}\n\nconst mapProfile = (p) => {\n  return p ? ({\n    participation: p.participation,\n    acquisitions: p.acquisitions,\n    betsVolume: fromNear(p.bets_volume),\n    availableRewards: fromNear(p.available_rewards),\n    profitTaken: fromNear(p.profit_taken),\n    numOffers: p.num_offers,\n    numBets: p.num_bets,\n    numClaims: p.num_claims,\n    numAcquisitions: p.num_acquisitions\n  }) : ({\n    participation: [],\n    acquisitions: [],\n    betsVolume: fromNear(0),\n    availableRewards: fromNear(0),\n    profitTaken: fromNear(0),\n    numOffers: 0,\n    numBets: 0,\n    numClaims: 0,\n    numAcquisitions: 0\n  })\n}\n\nconst mapStats = (s) => {\n  return {\n    numProfiles: s[0],\n    numBids: s[1],\n    numBidsOnClaim: s[2],\n    totalCommission: fromNear(s[3]),\n    numOffers: s[4],\n    numBets: s[5],\n    numClaims: s[6],\n    numAcquisitions: s[7]\n  }\n}\n\nfunction rules () {\n  return (\n    <div>\n      <h4>Hello</h4>\n      <ul>\n        <p>\n        This is NEAR Account Marketplace.\n        It allows you to sell, bet and buy NEAR Account names.\n        </p>\n      </ul>\n\n      <h4>For whom</h4>\n      <ul>\n        <p>\n          Founders &mdash; to allow you to find brilliant account names and place them onto the market for selling.\n        </p>\n        <p>\n          Believers &mdash; to participate in finding fair price, taking rewards for your faithful evaluation and wisdom.\n        </p>\n        <p>\n          Claimers &mdash; to obtain perfect account names for inner usage, personal collection or further resales.\n        </p>\n      </ul>\n\n      <h4>Basics</h4>\n      <ul>\n        <p>Initial placement costs 0.3 NEAR + ~1.6 NEAR to deploy a locker contract.\n          (The system expects at least 2 NEAR in available balance).\n          Initial claim price is 2.5 NEAR. There are two operations available:\n        </p>\n        <li>\n          <p>\n            <strong>Place a bet. </strong>\n          This costs half of the current price (starts from 1.25 NEAR at initial state).\n          The payment goes to previous believers, and the price increases for x1.2 times.\n          </p>\n        </li>\n        <li>\n          <p>\n            <strong>Claim an account. </strong>\n          This costs full price. You need to wait 72 hours to make sure no one wants\n          to bet on the account. If someone will bet within 72 hours, you will receive\n          all your funds back plus forfeits paid by believer who bets. If no one will bet,\n          the account is totally yours, congratulations!\n          </p>\n        </li>\n      </ul>\n\n      <h4>Rewards for bets</h4>\n      <ul>\n        <p>\n        Each new bet triggers the reward distribution function for previous believers.\n        This means, if you even bet only once, you will receive rewards multiple times.\n        The function converges to 25% rewards for each bet.\n        </p>\n        <p>\n          <i>Example. Let's say, you bet 1.8 NEAR for <strong>apple.near</strong>.\n          In a couple days its price has been increased by series of bets,\n          and you have been received 2.25 NEAR rewards for that bet in total.\n          </i>\n        </p>\n      </ul>\n\n      <h4>Rewards for claims</h4>\n      <ul>\n        <p>\n          Claim is the most important and unique procedure as it finalizes\n          the lifetime of account on the market.\n          The rewards for the successful claim are the biggest.\n        </p>\n        <p>\n          First of all, the founder of the account gets 25% of claim price as additional reward.\n          It means, even not betting at all, it's still possible to take huge rewards by\n          bringing awesome account names to the market.\n        </p>\n        <p>\n          <i>Due to importance of claiming accounts, as it helps for the main purpose of the project,\n          the marketplace takes zero commission for claiming.\n          </i>\n        </p>\n      </ul>\n\n      <h4>Commission</h4>\n      <ul>\n        <p>\n          Marketplace takes 5% commission for each bet plus small constant for initial placement (0.3 NEAR).\n        </p>\n        <p>\n          Marketplace takes 2.5% commission in addition, in case of betting for account which is under claiming.\n          This is necessary to prevent holding the account with no willing to actually claim it.\n          Strategies that disturbing market in such way are not welcomed as they diverge with\n          the purpose of the marketplace.\n        </p>\n        <p>\n        Marketplace takes zero commission for claim.\n        </p>\n      </ul>\n\n      <h4>Forfeits</h4>\n      <ul>\n        <p>\n          Forfeit is an additional cost for placing a bet while the account is under claiming.\n          Its value grows linearly from 0% at the moment when claim requested,\n          and up to 2.5% at the end of 72-hours period.\n          Forfeits are paid to claimers directly.\n          The purpose of forfeit is to pay for claimers' willing to obtain an account.\n        </p>\n      </ul>\n\n      <h4>Specific cases</h4>\n      <ul>\n        <p>\n          Knowing the mechanics, try to find your personal way to reach the maximal value.\n          There are couple examples that may help you.\n        </p>\n        <li>\n          <p>\n            <strong>Using multiple accounts and place series of bets. </strong>\n            As all Believers behind their accounts are anonymous,\n            you can use multiple accounts while betting.\n            That's why there is no reason to disallow to bet multiple times from the same\n            account - you can simply bet from another one.\n            You may use this trick if you want to hide your interest or intentions\n            by spreading up your bets between multiple accounts.\n          </p>\n        </li>\n        <li>\n          <p>\n            <strong>Sell the account for the full price. </strong>\n            If you are sure about fair price, you shouldn't wait until others bet.\n            You can simply bet as many times as necessary to increase the price up\n            to the value that makes sense to you.\n            In this case you will take at least 87.5% rewards taken from claimer directly,\n            not sharing with anyone.\n          </p>\n        </li>\n        <p>\n          Also mechanics is tuned in such way to make sure it's impossible to take less than you bet.\n        </p>\n      </ul>\n\n      <h4>Account acquiring procedure</h4>\n      <ul>\n        <p>\n          <li>(For experts) Replace public key.</li>\n          <li>Put seed phrase.</li>\n         After acquiring you can remove a contract and return its cost back (~1.6 NEAR).\n        </p>\n      </ul>\n\n      <h4>Example of distribution</h4>\n      <ul>\n        <p>\n        The following spreadsheet shows rewards distribution for an account\n        that has been bet for 15 times and claimed afterwards. 0-th bet means initial\n        offering from founder, all other lines correspond to bets.\n        </p>\n        <p>\n          <samp>\n          Sum of bets + placement: 90.3439\n            <br />Total paid: 128.8614\n            <br />Commission: 4.8022\n            <br />Rewards after claim:\n            <br />0 bet:  0.3000,  rewards:  11.5044,   ratio:  38.3480\n            <br />1 bet:  1.2500,  rewards:  1.5625,   ratio:  1.2500\n            <br />2 bet:  1.5000,  rewards:  1.8750,   ratio:  1.2500\n            <br />3 bet:  1.8000,  rewards:  2.2500,   ratio:  1.2500\n            <br />4 bet:  2.1600,  rewards:  2.7000,   ratio:  1.2500\n            <br />5 bet:  2.5920,  rewards:  3.2399,   ratio:  1.2499\n            <br />6 bet:  3.1104,  rewards:  3.8875,   ratio:  1.2499\n            <br />7 bet:  3.7325,  rewards:  4.6641,   ratio:  1.2496\n            <br />8 bet:  4.4790,  rewards:  5.5938,   ratio:  1.2489\n            <br />9 bet:  5.3748,  rewards:  6.7027,   ratio:  1.2471\n            <br />10 bet:  6.4497,  rewards:  8.0118,   ratio:  1.2422\n            <br />11 bet:  7.7397,  rewards:  9.5183,   ratio:  1.2298\n            <br />12 bet:  9.2876,  rewards:  11.1487,   ratio:  1.2004\n            <br />13 bet:  11.1451,  rewards:  12.7271,   ratio:  1.1419\n            <br />14 bet:  13.3742,  rewards:  14.6001,   ratio:  1.0917\n            <br />15 bet:  16.0490,  rewards:  24.0735,   ratio:  1.5000\n            <br />Sum of rewards: 124.0592\n          </samp>\n        </p>\n      </ul>\n\n    </div>\n  )\n}\n\nexport { rules, fromNear, loader, mapBidInfo, mapStats, mapProfile, qq }\n","import React from 'react'\nimport { Link } from 'react-router-dom'\n\nimport { fromNear } from './Helpers'\n\nfunction AcquireButton (props) {\n  return (\n    <div>\n      <Link\n        to={`/acquire/${props.bidId}`}\n        className='btn w-100 btn-success'\n      >\nAcquire\n      </Link>\n    </div>\n  )\n}\n\nfunction PriceButton (props) {\n  return (\n    <Link\n      className='btn w-100 btn-success'\n      to={`/bid/${props.bidId}`}\n    >\nStarts from {(fromNear(props.price) + fromNear(props.forfeit)).toFixed(2)} NEAR\n    </Link>\n  )\n}\n\nfunction DetailsButton (props) {\n  return (\n    <Link\n      to={`/bid/${props.bidId}`}\n      className='btn w-100 btn-success'\n    >\nDetails\n    </Link>\n  )\n}\n\nexport { PriceButton, DetailsButton, AcquireButton }\n","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport useSWR from 'swr'\n\nimport { AcquireButton, PriceButton, DetailsButton } from './Buttons'\nimport { loader, mapBidInfo } from './Helpers'\n\nfunction BidPreview (props) {\n  const bidId = props.bidId\n\n  const fetchBid = async (...args) => {\n    return mapBidInfo(await props._near.contract.get_bid({\n      bid_id: args[1]\n    }))\n  }\n\n  const { data: bid } = useSWR(['bid_id', bidId], fetchBid, { errorRetryInterval: 100 })\n\n  return bid ? (\n    <div className='row align-middle pt-3'>\n      <div className='col-4'>\n        <Link to={`/bid/${bidId}`} style={{ textDecoration: 'none', color: 'white' }}>{bidId}</Link>\n      </div>\n      <div className='col-6' style={{ maxWidth: '240px' }}>\n        {!bid.isAtMarket ? (<AcquireButton {...props} bidId={bidId} />) : (bid.isOnAcquisition\n          ? (<DetailsButton {...props} bidId={bidId} />)\n          : (<PriceButton {...props} bidId={bidId} price={bid.betPrice} forfeit={bid.forfeit} />))}\n      </div>\n    </div>\n  ) : (loader())\n}\n\nexport { BidPreview }\n"],"sourceRoot":""}