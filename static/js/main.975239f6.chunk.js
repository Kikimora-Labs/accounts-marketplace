(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{187:function(e,t,a){"use strict";(function(e){var n=a(202),r=a(1),c=a.n(r),l=a(6),s=a(188),i=a(189),o=a(203),u=a(201),m=a(0),d=a.n(m),f=(a(108),a(230),a(231),a(232),a(233),a(45)),b=a(190),p=a.n(b),h=a(13),E=a(4),g=a(7),v=a(33),y=a.n(v),w=a(191),N=a(195),x=a(196),k=a(197),_=a(198),O=a(199),I=a(204),j="berry.cards"===window.location.hostname?{accountSuffix:"near",networkId:"mainnet",nodeUrl:"https://rpc.mainnet.near.org",contractName:"dev-1616094400078-8793996",walletUrl:"https://wallet.near.org",marketPublicKey:"ed25519:EgmA4v9E2SjFVu31bmJKJtNW6cjkx2cbM3HyXprsYvrA",wasmCode:"https://near.bet/bin"}:{accountSuffix:"testnet",networkId:"testnet",nodeUrl:"https://rpc.testnet.near.org",contractName:"dev-1616094400078-8793996",walletUrl:"https://wallet.testnet.near.org",marketPublicKey:"ed25519:EgmA4v9E2SjFVu31bmJKJtNW6cjkx2cbM3HyXprsYvrA",wasmCode:"https://near.bet/bin"},A=function(e){return e?{participation:e.participation,acquisitions:e.acquisitions,betsVolume:Object(g.a)(e.bets_volume),availableRewards:Object(g.a)(e.available_rewards),profitTaken:Object(g.a)(e.profit_taken),numOffers:e.num_offers,numBets:e.num_bets,numClaims:e.num_claims,numAcquisitions:e.num_acquisitions}:{participation:[],acquisitions:[],betsVolume:Object(g.a)(0),availableRewards:Object(g.a)(0),profitTaken:Object(g.a)(0),numOffers:0,numBets:0,numClaims:0,numAcquisitions:0}},S=function(t){Object(o.a)(r,t);var a=Object(u.a)(r);function r(e){var t;return Object(s.a)(this,r),(t=a.call(this,e))._near={},t._near.lsKey=j.contractName+":v01:",t._near.lsOfferAccountId=t._near.lsKey+"offerAccountId",t._near.lsFavorAccountId=t._near.lsKey+"favorAccountId",t._near.lsPrevKeys=t._near.lsKey+"prevKeys",t._near.config=j,t._near.marketPublicKey=j.marketPublicKey,t._near.accountSuffix=j.accountSuffix,t.state={connected:!1,account:null},t._initNear().then((function(){t.setState({signedIn:!!t._near.accountId,signedAccountId:t._near.accountId,connected:!0})})),t}return Object(i.a)(r,[{key:"_initNear",value:function(){var t=Object(l.a)(c.a.mark((function t(){var a,n,r,s,i,o,u,m,d,b,p,h,E,g,v,w=this;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=new f.keyStores.BrowserLocalStorageKeyStore,t.next=3,f.connect(Object.assign({deps:{keyStore:a}},j));case 3:if(n=t.sent,this._near.keyStore=a,this._near.near=n,this._near.walletConnection=new f.WalletConnection(n,j.contractName),this._near.accountId=this._near.walletConnection.getAccountId(),this._near.account=this._near.walletConnection.account(),this._near.contract=new f.Contract(this._near.account,j.contractName,{viewMethods:["get_profile","get_bid","get_top_bets","get_top_claims","get_global_stats"],changeMethods:["offer","bet","claim","finalize","acquire"]}),this._near.profiles={},this._near.getProfile=function(e){return e in w._near.profiles||(w._near.profiles[e]=Promise.resolve(Object(l.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=A,t.next=3,w._near.contract.get_profile({profile_id:e});case 3:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 5:case"end":return t.stop()}}),t)})))())),w._near.profiles[e]},this._near.logOut=function(){w._near.walletConnection.signOut(),w._near.accountId=null,w.setState({signedIn:!!w._accountId,signedAccountId:w._accountId})},this._near.refreshAllowance=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.logOut();case 2:return e.next=4,w.requestSignIn();case 4:case"end":return e.stop()}}),e)}))),!this._near.accountId){t.next=104;break}return t.next=17,this._near.getProfile(this._near.accountId);case 17:return r=t.sent,this.setState({profile:r}),t.next=21,this._near.account.getAccessKeys();case 21:if(s=t.sent,i=!1,s.forEach((function(e){e.public_key===w._near.marketPublicKey&&(i=!0)})),o=y.a.get(this._near.lsOfferAccountId),u=y.a.get(this._near.lsFavorAccountId),i){t.next=104;break}return t.prev=27,t.next=30,this._near.near.account(this._near.accountId);case 30:return m=t.sent,t.next=33,m.addKey(this._near.marketPublicKey,void 0,void 0,0);case 33:if(this._near.accountId===o){t.next=40;break}return t.next=36,m.deleteKey(this._near.marketPublicKey);case 36:console.log("wrong account"),this.setState({offerFinished:!0,offerSuccess:!1}),t.next=97;break;case 40:return t.next=42,this._near.contract.offer({profile_id:u},"200000000000000",String(parseInt(45e7))+"000000000000000");case 42:return d=t.sent,console.log("offer result",d),t.next=46,m.state();case 46:return b=t.sent,console.log(b),t.next=50,fetch(j.wasmCode);case 50:return p=t.sent,console.log("!",p),t.next=54,p.arrayBuffer();case 54:return h=t.sent,t.next=57,m.deployContract(new Uint8Array(h));case 57:return t.next=59,new f.Contract(m,this._near.accountId,{viewMethods:[],changeMethods:["lock"],sender:this._near.accountId});case 59:return E=t.sent,console.log("Deploying done. Initializing contract..."),t.t0=console,t.next=64,E.lock(e.from('{"owner_id":"'+j.contractName+'"}'));case 64:return t.t1=t.sent,t.t0.log.call(t.t0,t.t1),console.log("Init is done."),t.t2=console,t.next=70,m.state();case 70:return t.t3=t.sent.code_hash,t.t2.log.call(t.t2,"code hash",t.t3),t.next=74,this._near.walletConnection._keyStore.getKey(j.networkId,this._near.accountId);case 74:g=t.sent.getPublicKey().toString(),console.log("all keys",s),console.log("all local keys",this._near.walletConnection._authData.allKeys),console.log("last key",g),v=0;case 79:if(!(v<s.length)){t.next=88;break}if(g===s[v].public_key){t.next=85;break}return console.log("deleting ",s[v]),t.next=84,m.deleteKey(s[v].public_key);case 84:console.log("deleting ",s[v],"done");case 85:v++,t.next=79;break;case 88:return console.log("deleting marketplace key",this._near.marketPublicKey),t.next=91,m.deleteKey(this._near.marketPublicKey);case 91:return console.log("deleting ",this._near.marketPublicKey,"done"),console.log("deleting last key",g),t.next=95,m.deleteKey(g);case 95:console.log("deleting ",g,"done"),this.setState({offerFinished:!0,offerSuccess:!0});case 97:this._near.logOut(),t.next=104;break;case 100:t.prev=100,t.t4=t.catch(27),this.setState({offerFinished:!0,offerSuccess:!1}),console.log("Error",t.t4);case 104:case"end":return t.stop()}}),t,this,[[27,100]])})));return function(){return t.apply(this,arguments)}}()},{key:"requestSignIn",value:function(){var e=Object(l.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t&&t.preventDefault(),"Accounts Marketplace",e.next=4,this._near.walletConnection.requestSignIn(j.contractName,"Accounts Marketplace");case 4:return e.abrupt("return",!1);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=Object(n.a)({_near:this._near,refreshAllowance:function(){return e._near.refreshAllowance()}},this.state),a=this.state.connected?this.state.signedIn?d.a.createElement("div",null,d.a.createElement("button",{className:"btn btn-outline-secondary",onClick:function(){return e._near.logOut()}},"Sign out (",this.state.signedAccountId,")")):d.a.createElement("div",null,d.a.createElement("button",{className:"btn btn-primary",onClick:function(t){return e.requestSignIn(t)}},"Sign in with NEAR Wallet")):d.a.createElement("div",null,"Connecting... ",d.a.createElement("span",{className:"spinner-grow spinner-grow-sm",role:"status","aria-hidden":"true"}));return d.a.createElement("div",{className:"App"},d.a.createElement(h.a,{basename:""},d.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light mb-3"},d.a.createElement("div",{className:"container-fluid"},d.a.createElement(h.b,{className:"navbar-brand",to:"/",title:"near.bet"},d.a.createElement("img",{src:p.a,alt:"NEAR Accounts Marketplace",className:"d-inline-block align-middle"}),"[BETA] NEAR Accounts Marketplace"),d.a.createElement("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},d.a.createElement("span",{className:"navbar-toggler-icon"})),d.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},d.a.createElement("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0"},d.a.createElement("li",{className:"nav-item"},d.a.createElement(h.b,{className:"nav-link","aria-current":"page",to:"/"},"Accounts")),this.state.signedIn&&d.a.createElement("li",{className:"nav-item"},d.a.createElement(h.b,{className:"nav-link","aria-current":"page",to:"/profile/".concat(this.state.signedAccountId)},"Profile")),d.a.createElement("li",{className:"nav-item"},d.a.createElement(h.b,{className:"nav-link","aria-current":"page",to:"/offer"},"Offer")),d.a.createElement("li",{className:"nav-item"},d.a.createElement(h.b,{className:"nav-link","aria-current":"page",to:"/rules"},"Rules"))),d.a.createElement("form",{className:"d-flex"},a)))),d.a.createElement("a",{className:"github-fork-ribbon right-bottom fixed",href:"https://github.com/kouprin/accounts-marketplace","data-ribbon":"Fork me on GitHub",title:"Fork me on GitHub"},"Fork me on GitHub"),d.a.createElement(E.c,null,d.a.createElement(E.a,{exact:!0,path:"/"},d.a.createElement(w.a,t)),d.a.createElement(E.a,{exact:!0,path:"/rules"},d.a.createElement(k.a,t)),d.a.createElement(E.a,{exact:!0,path:"/offer"},d.a.createElement(N.a,t)),d.a.createElement(E.a,{exact:!0,path:"/offerProcess"},d.a.createElement(x.a,t)),d.a.createElement(E.a,{exact:!0,path:"/profile/:profileId"},d.a.createElement(_.a,t)),d.a.createElement(E.a,{exact:!0,path:"/bid/:bidId"},d.a.createElement(I.a,t)),d.a.createElement(E.a,{exact:!0,path:"/acquire/:bidId"},d.a.createElement(O.a,t)))))}}]),r}(d.a.Component);t.a=S}).call(this,a(5).Buffer)},190:function(e,t,a){e.exports=a.p+"static/media/logo.af8e6949.png"},191:function(e,t,a){"use strict";var n=a(1),r=a.n(n),c=a(105),l=a(6),s=a(12),i=(a(288),a(0)),o=a.n(i),u=a(32),m=a(194),d=a.n(m);t.a=function(e){var t=Object(i.useState)([]),a=Object(s.a)(t,2),n=a[0],m=a[1],f=Object(i.useState)(!1),b=Object(s.a)(f,2),p=b[0],h=b[1],E=function(){var t=Object(l.a)(r.a.mark((function t(){var a,l,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object(c.a)(n),l=a.length>0?a[a.length-1]:null,t.next=4,e._near.contract.get_top_bets({from_key:l,limit:25});case 4:s=t.sent,a.push.apply(a,Object(c.a)(s)),0===s.length&&h(!1),m(a);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(i.useEffect)((function(){e.connected&&h(!0)}),[e.connected]);var g=n.map((function(t){var a=Object(s.a)(t,2),n=(a[0],a[1]);return o.a.createElement(u.a,Object.assign({},e,{key:n,bidId:n}))})),v=o.a.createElement("div",{key:"1",className:"d-flex justify-content-center"},o.a.createElement("div",{className:"spinner-grow",role:"status"},o.a.createElement("span",{className:"visually-hidden"},"Loading...")));return o.a.createElement("div",null,o.a.createElement("div",{className:"container"},o.a.createElement("div",null,o.a.createElement("h3",null,"Account names on sale")),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col"},o.a.createElement(d.a,{pageStart:0,loadMore:E,hasMore:p,loader:v},g)))))}},195:function(e,t,a){"use strict";var n=a(1),r=a.n(n),c=a(6),l=a(12),s=a(0),i=a.n(s),o=a(33),u=a.n(o),m=a(7);t.a=function(e){var t=e._near.accountSuffix,a=Object(s.useState)(!0),n=Object(l.a)(a,2),o=n[0],d=n[1];function f(){return(f=Object(c.a)(r.a.mark((function t(a){var n,c,l,s,i,o,f,b;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),d(!1),n="Accounts Marketplace",e.signedIn&&e._near.logOut(),!e.connected){t.next=47;break}if(c=document.getElementById("offerInput").value,l=document.getElementById("rewardsInput").value,c&&l){t.next=11;break}throw alert("Account(s) are empty"),d(!0),console.error("Account(s) are empty");case 11:if(s=c+"."+e._near.accountSuffix,i=l+"."+e._near.accountSuffix,s!==i){t.next=17;break}throw alert("Accounts must be different"),d(!0),console.error("Accounts must be different");case 17:return t.next=19,e._near.near.account(s);case 19:return o=t.sent,f=null,t.prev=21,t.t0=m.a,t.next=25,o.getAccountBalance();case 25:t.t1=t.sent.available,f=(0,t.t0)(t.t1),t.next=34;break;case 29:throw t.prev=29,t.t2=t.catch(21),alert("Account not exist - you have to create it first"),d(!0),console.error("Account not exist - you have to create it first");case 34:if(console.log(f),!(f<2.15)){t.next=39;break}throw alert("Not enough balance - should be at least 2.2 NEAR available"),d(!0),console.error("Not enough balance - should be at least 2.2 NEAR available");case 39:return t.next=41,o.getAccessKeys();case 41:return b=t.sent,u.a.set(e._near.lsPrevKeys,b),u.a.set(e._near.lsFavorAccountId,i),u.a.set(e._near.lsOfferAccountId,s),t.next=47,e._near.walletConnection.requestSignIn("",n,window.location.origin+"/#/offerProcess",window.location.origin+"/#/offer");case 47:case"end":return t.stop()}}),t,null,[[21,29]])})))).apply(this,arguments)}return i.a.createElement("div",{className:"container my-auto"},i.a.createElement("h1",{className:"text-center"},"Offer your account"),i.a.createElement("h2",{className:"text-center"},"Here you can offer your account to the Market. Choose an account to transfer all rewards after claiming your account."),i.a.createElement("form",{onSubmit:function(e){return function(e){return f.apply(this,arguments)}(e)}},i.a.createElement("div",{className:"d-flex align-items-center justify-content-center"},i.a.createElement("div",{className:"form-group",style:{width:"400px",margin:"25px"}},i.a.createElement("label",{htmlFor:"exampleInputEmail1"},"Account you offer"),i.a.createElement("div",{className:"account-suffix account-suffix-"+t},i.a.createElement("input",{type:"text",className:"form-control mt-2",id:"offerInput",placeholder:"Example: satoshi"})),i.a.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"All your access keys will be removed"),i.a.createElement("div",{style:{margin:"25px"}}),i.a.createElement("label",{htmlFor:"exampleInputEmail1"},"Account which takes rewards"),i.a.createElement("div",{className:"account-suffix account-suffix-"+t},i.a.createElement("input",{type:"text",className:"form-control mt-2",id:"rewardsInput",placeholder:"Example: vitalik"})),i.a.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"All rewards will be transferred to this account"),i.a.createElement("br",null),o?i.a.createElement("button",{className:"btn btn-outline-warning mt-5 w-100"},"Offer"):Object(m.b)()))))}},196:function(e,t,a){"use strict";var n=a(0),r=a.n(n),c=a(7);t.a=function(e){var t=!1,a=!1;return e.connected&&(t=e.offerFinished,a=e.offerSuccess),r.a.createElement("div",{className:"container my-auto"},r.a.createElement("h1",{className:"text-center"},"Offer processing"),t?a?r.a.createElement("h2",{className:"alert alert-success",role:"alert"},"Success!"):r.a.createElement("h2",{className:"alert alert-danger",role:"alert"},"Something went wrong"):r.a.createElement("div",null,r.a.createElement("div",{style:{margin:"25px"}}),Object(c.b)(),r.a.createElement("h2",{className:"alert alert-warning",role:"alert"},"Do not refresh or close the page"),r.a.createElement("h2",{className:"alert alert-secondary",role:"alert"},"It may take up to 5 minutes to complete")))}},197:function(e,t,a){"use strict";var n=a(1),r=a.n(n),c=a(6),l=a(12),s=a(0),i=a.n(s),o=a(7);t.a=function(e){var t=Object(s.useState)(null),a=Object(l.a)(t,2),n=a[0],u=a[1],m=Object(s.useState)(!0),d=Object(l.a)(m,2),f=d[0],b=d[1],p=Object(s.useCallback)(Object(c.a)(r.a.mark((function t(){var a,n,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([e._near.contract.get_global_stats()]);case 2:return a=t.sent,n=Object(l.a)(a,1),c=n[0],t.abrupt("return",{numProfiles:(r=c)[0],numBids:r[1],totalCommission:Object(o.a)(r[2]),numOffers:r[3],numBets:r[4],numClaims:r[5],numAcquisitions:r[6]});case 6:case"end":return t.stop()}var r}),t)}))),[e._near]);return Object(s.useEffect)((function(){e.connected&&p().then((function(e){u(e),b(!1)}))}),[e.connected,p]),i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"row"},f?i.a.createElement("div",{className:"col"},i.a.createElement("div",{className:"d-flex justify-content-center"},i.a.createElement("div",{className:"spinner-grow",role:"status"},i.a.createElement("span",{className:"visually-hidden"},"Loading...")))):i.a.createElement("div",{className:"col col-12 col-lg-8 col-xl-8"},Object(o.c)(),i.a.createElement("div",null,i.a.createElement("h3",null,"Global Stats"),i.a.createElement("ul",null,i.a.createElement("li",null,"Num active profiles: ",n.numProfiles),i.a.createElement("li",null,"Num active bids: ",n.numBids))))))}},198:function(e,t,a){"use strict";var n=a(1),r=a.n(n),c=a(6),l=a(12),s=a(0),i=a.n(s),o=a(4),u=a(32);t.a=function(e){var t=Object(o.f)().profileId,a=Object(s.useState)(null),n=Object(l.a)(a,2),m=n[0],d=n[1],f=Object(s.useCallback)(Object(c.a)(r.a.mark((function a(){return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e._near.getProfile(t);case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}),a)}))),[e._near,t]);Object(s.useEffect)((function(){e.connected&&f().then(d)}),[e.connected,f]);var b=null,p=null;e.connected&&m&&(b=m.acquisitions.map((function(t){return i.a.createElement(u.a,Object.assign({},e,{key:t,bidId:t,onAcquisition:!0}))})),p=m.participation.map((function(t){return i.a.createElement(u.a,Object.assign({},e,{key:t,bidId:t}))})));var h=i.a.createElement("div",{className:"d-flex justify-content-center",key:"loader"},i.a.createElement("div",{className:"spinner-grow",role:"status"},i.a.createElement("span",{className:"visually-hidden"},"Loading...")));return i.a.createElement("div",null,i.a.createElement("div",{className:"container"},e.connected?i.a.createElement("div",{className:"row justify-content-md-center"},m?i.a.createElement("div",{className:"col col-12 col-lg-4 col-xl-4"},i.a.createElement("h3",null,"Stats"),i.a.createElement("ul",null,i.a.createElement("li",null,"Bets volume: ",m.betsVolume.toFixed(2)," NEAR"),i.a.createElement("li",null,"Available rewards: ",m.availableRewards.toFixed(2)," NEAR"),i.a.createElement("li",null,"TODO BUTTON TO COLLECT REWARDS"),i.a.createElement("li",null,"TODO PRINT OTHER LOCAL STATS"))):i.a.createElement("div",{className:"col col-12 col-lg-8 col-xl-6"},i.a.createElement("div",{className:"d-flex justify-content-center"},i.a.createElement("div",{className:"spinner-grow",role:"status"},i.a.createElement("span",{className:"visually-hidden"},"Loading..."))))):i.a.createElement("div",null),i.a.createElement("div",{className:"col"},i.a.createElement("h3",null,"Successful claims"),b||h),i.a.createElement("div",{className:"col"},i.a.createElement("h3",null,"Participating"),p||h)))}},199:function(e,t,a){"use strict";var n=a(1),r=a.n(n),c=a(6),l=a(0),s=a.n(l),i=a(4),o=a(7),u=a(200);t.a=function(e){var t=Object(i.f)().bidId;function a(){return(a=Object(c.a)(r.a.mark((function a(n){var c,l;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),c=document.getElementById("acquireSeedPhrase").value,l=Object(u.parseSeedPhrase)(c,"").publicKey,console.log(l),a.next=6,e._near.contract.acquire({bid_id:t,new_public_key:l},"200000000000000","0");case 6:case"end":return a.stop()}}),a)})))).apply(this,arguments)}function n(){return(n=Object(c.a)(r.a.mark((function a(n){var c;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),c=document.getElementById("acquirePublicKey").value,console.log(c),a.next=5,e._near.contract.acquire({bid_id:t,new_public_key:c},"200000000000000","0");case 5:case"end":return a.stop()}}),a)})))).apply(this,arguments)}var l=e._near.config.walletUrl+"/setup-seed-phrase/"+t+"/phrase",m=e._near.config.walletUrl+"/recover-seed-phrase";return s.a.createElement("div",{className:"container my-auto"},s.a.createElement("h1",{className:"text-center"},"Acquire ",t),s.a.createElement("h2",{className:"text-center"},"Do it easy way or like a pro?"),s.a.createElement("hr",null),s.a.createElement("form",{onSubmit:function(e){return function(e){return a.apply(this,arguments)}(e)}},s.a.createElement("h3",{className:"text-center"},"Generate a seed phrase"),s.a.createElement("div",{className:"d-flex align-items-center justify-content-center"},s.a.createElement("div",{className:"form-group",style:{width:"600px",margin:"25px"}},s.a.createElement("div",null,"1. Generate a new seed phrase"),s.a.createElement("a",{href:l},"Go to the NEAR wallet and copy your seed phrase"),s.a.createElement("div",null,'2. Put your seed phrase here and click on "Acquire using seed phrase"'),s.a.createElement("div",null,s.a.createElement("input",{type:"text",className:"form-control mt-2",id:"acquireSeedPhrase",placeholder:"Example: van honey cattle trend garbage human cereal donor pipe you response gym "})),e.connected?s.a.createElement("button",{className:"btn btn-outline-warning my-3 w-100"},"Acquire using seed phrase"):Object(o.b)(),s.a.createElement("div",null,"3. Restore you account at NEAR wallet using seed phrase"),s.a.createElement("a",{href:m},"Go to the NEAR wallet and restore your account")))),s.a.createElement("hr",null),s.a.createElement("form",{onSubmit:function(e){return function(e){return n.apply(this,arguments)}(e)}},s.a.createElement("h3",{className:"text-center"},"or \u2014 Transfer your public key"),s.a.createElement("div",{className:"d-flex align-items-center justify-content-center"},s.a.createElement("div",{className:"form-group",style:{width:"600px",margin:"25px"}},s.a.createElement("label",{htmlFor:"exampleInputEmail1"},"Put your base58 public key"),s.a.createElement("div",null,s.a.createElement("input",{type:"text",className:"form-control mt-2",id:"acquirePublicKey",placeholder:"Example: 9bk1tm45X2hBSffmD65pA2vch862jtcz75mkRR7MXNVj"})),e.connected?s.a.createElement("button",{className:"btn btn-outline-warning mt-3 w-100"},"Acquire using new public key"):Object(o.b)()))))}},204:function(e,t,a){"use strict";var n=a(1),r=a.n(n),c=a(6),l=a(12),s=a(0),i=a.n(s),o=a(4),u=a(7),m=a(13);function d(e){var t=e.betPrice,a=e.forfeit,n=Object(u.a)(t)+Object(u.a)(a);function l(){return(l=Object(c.a)(r.a.mark((function t(a){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),console.log(String(1e9*n)+"000000000000000"),t.next=4,e._near.contract.bet({bid_id:e.bidId},"200000000000000",String(parseInt(1.01*n*1e9))+"000000000000000");case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return i.a.createElement("button",{className:"btn btn-primary btn-lg btn-block",disabled:!e.signedIn||!e.isSafe,onClick:function(e){return function(e){return l.apply(this,arguments)}(e)}},"Bet for ",n.toFixed(6)," NEAR")}function f(e){var t=Object(u.a)(e.claimPrice);function a(e){return n.apply(this,arguments)}function n(){return(n=Object(c.a)(r.a.mark((function a(n){return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),console.log(String(1e9*t)+"000000000000000"),a.next=4,e._near.contract.claim({bid_id:e.bidId},"200000000000000",String(parseInt(1e9*t))+"000000000000000");case 4:case"end":return a.stop()}}),a)})))).apply(this,arguments)}return t?i.a.createElement("button",{className:"btn btn-success btn-lg btn-block",disabled:!e.signedIn||!e.isSafe,onClick:function(e){return a(e)}},"Claim for ",t.toFixed(6)," NEAR"):i.a.createElement("button",{className:"btn btn-outline-warning btn-lg btn-block",disabled:!0,onClick:function(e){return a(e)}},"Already claimed - you can only bet")}function b(e){function t(){return(t=Object(c.a)(r.a.mark((function t(a){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._near.contract.finalize({bid_id:e.bidId},"200000000000000","0");case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var a=e.signedIn&&e.bidInfo&&e.signedAccountId&&e.signedAccountId===e.bidInfo.claimedBy;return!(e.signedIn&&e.isSafe)?i.a.createElement("button",{disabled:!0,className:"btn btn-primary btn-lg btn-block"},"Finalize"):i.a.createElement(m.b,{to:a?"/acquire/".concat(e.bidId):"/profile/".concat(e.signedAccountId),className:"btn btn-primary btn-lg btn-block",onClick:function(e){return function(e){return t.apply(this,arguments)}(e)}},"Finalize")}function p(e){return i.a.createElement(m.b,{className:"btn btn-success btn-lg btn-block",to:"/acquire/".concat(e.bidId)},"Acquire")}function h(e){var t=e.bidInfo,a=t.isAtMarket,n=t.isOnAcquisition,r=!1;return e.signedIn&&e.profile.acquisitions.forEach((function(t){t===e.bidId&&(r=!0)})),a?n?i.a.createElement("div",null,i.a.createElement("div",{className:"row py-3"},i.a.createElement(b,Object.assign({},e,{bidInfo:e.bidInfo})))):i.a.createElement("div",null,i.a.createElement("div",{className:"row py-3"},i.a.createElement(d,Object.assign({},e,{betPrice:t.betPrice,forfeit:t.forfeit})),i.a.createElement("div",{className:"row py-1"}),i.a.createElement(f,Object.assign({},e,{claimPrice:t.claimPrice})))):r?i.a.createElement("div",null,i.a.createElement("h4",null,"Congratulations! You claimed the account successfully. Please proceed to the acquisition procedure."),i.a.createElement("div",{className:"row py-3"},i.a.createElement(p,Object.assign({},e,{bidInfo:e.bidInfo})))):i.a.createElement("div",null,"Is not on market. Is it a good fit?")}var E=a(32);t.a=function(e){var t=Object(o.f)().bidId,a=Object(s.useState)(null),n=Object(l.a)(a,2),u=n[0],m=n[1],d=Object(s.useState)(null),f=Object(l.a)(d,2),b=f[0],p=f[1],g=Object(s.useCallback)(Object(c.a)(r.a.mark((function a(){var n;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.t0=E.b,a.next=3,e._near.contract.get_bid({bid_id:t});case 3:return a.t1=a.sent,n=(0,a.t0)(a.t1),a.abrupt("return",n);case 6:case"end":return a.stop()}}),a)}))),[e._near,t]),v=Object(s.useCallback)(Object(c.a)(r.a.mark((function a(){var n,c,l;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e._near.near.account(t);case 2:return n=a.sent,a.next=5,n.state();case 5:return c=a.sent.code_hash,a.next=8,n.getAccessKeys();case 8:return l=a.sent.length,a.abrupt("return",{codeHash:c,accessKeysLen:l});case 10:case"end":return a.stop()}}),a)}))),[e._near,t]);Object(s.useEffect)((function(){e.connected&&(g().then(m),v().then(p))}),[e.connected,g,v,t]);var y=!!u&&!!b,w=b&&"DKUq738xnns9pKjpv9GifM68UoFSmfnBYNp3hsfkkUFa"===b.codeHash&&0===b.accessKeysLen;return i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col col-12 col-lg-8 col-xl-6"},y?i.a.createElement("div",{className:"bid m-2"},i.a.createElement("div",{className:"bid-body text-start"},i.a.createElement("h3",null,t),w?i.a.createElement("h2",null,"Account is safe"):i.a.createElement("h2",null,"Hash of the contract: ",b.codeHash,i.a.createElement("br",null),"expected DKUq738xnns9pKjpv9GifM68UoFSmfnBYNp3hsfkkUFa",i.a.createElement("br",null),"Amount of Full Access Keys: ",b.accessKeysLen,", expected 0",i.a.createElement("br",null),"THE ACCOUNT IS NOT CONSIDERED SAFE, YOU ASKED NOT TO PARTICIPATE"),u.claimedBy?i.a.createElement("div",null,i.a.createElement("p",null,"Claimed by ",u.claimedBy)):i.a.createElement("div",null,i.a.createElement("p",null,"No one claimed yet")),i.a.createElement("div",null,i.a.createElement("h2",null,"Accounts who participate:"),i.a.createElement("table",{className:"table"},i.a.createElement("tbody",null,u.bets.map((function(e,t){return i.a.createElement("tr",{key:t},e)})))))),i.a.createElement("div",{className:"text-center"},i.a.createElement(h,Object.assign({},e,{bidId:t,bidInfo:u,isSafe:w})),i.a.createElement("div",{className:"row text-muted text-start"},"Price breakdown: ...",i.a.createElement("p",null,"blah")))):i.a.createElement("div",{className:"bid m-2"},i.a.createElement("div",{className:"d-flex justify-content-center"},i.a.createElement("div",{className:"spinner-grow",role:"status"},i.a.createElement("span",{className:"visually-hidden"},"Loading...")))))))}},205:function(e,t,a){e.exports=a(206)},206:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(186),l=a.n(c),s=(a(211),a(187));l.a.render(r.a.createElement(s.a,null),document.getElementById("root"))},211:function(e,t,a){},232:function(e,t,a){},233:function(e,t,a){},237:function(e,t){},243:function(e,t){},258:function(e,t){},260:function(e,t){},288:function(e,t,a){},289:function(e,t,a){},298:function(e,t){},300:function(e,t){},32:function(e,t,a){"use strict";var n=a(1),r=a.n(n),c=a(6),l=a(12),s=(a(289),a(0)),i=a.n(s),o=a(13),u=a(7);function m(e){return i.a.createElement("div",null,i.a.createElement(o.b,{to:"/acquire/".concat(e.bidId),className:"btn btn-success"},"Acquire"))}function d(e){return i.a.createElement("div",null,i.a.createElement(o.b,{to:"/bid/".concat(e.bidId),className:"btn btn-success"},"Starts from ",(Object(u.a)(e.price)+Object(u.a)(e.forfeit)).toFixed(2)," NEAR"))}function f(e){return i.a.createElement("div",null,i.a.createElement(o.b,{to:"/bid/".concat(e.bidId),className:"btn btn-primary"},"Details"))}a.d(t,"a",(function(){return p})),a.d(t,"b",(function(){return b}));var b=function(e){return e?{isAtMarket:!0,numClaims:e.num_claims,claimedBy:e.claim_status?e.claim_status[0]:null,bets:e.bets,betPrice:e.bet_price,claimPrice:e.claim_price,forfeit:e.forfeit,isOnAcquisition:e.on_acquisition}:{isAtMarket:!1,numClaims:0,claimedBy:null,bets:[],betPrice:0,claimPrice:0,forfeit:null,isOnAcquisition:!1}};function p(e){var t=Object(s.useState)(e.bid),a=Object(l.a)(t,2),n=a[0],u=a[1],p=e.bidId,h=e.bid,E=!!e.onAcquisition,g=Object(s.useCallback)(Object(c.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(E){t.next=8;break}return t.t0=b,t.next=4,e._near.contract.get_bid({bid_id:p});case 4:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 8:return t.abrupt("return",b(null));case 9:case"end":return t.stop()}}),t)}))),[e._near,p,E]);return Object(s.useEffect)((function(){e.connected&&(h?u(h):g().then(u))}),[e.connected,h,g]),n?i.a.createElement("div",{className:"container m-3"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-5"},i.a.createElement(o.b,{className:"nav-link",to:"/bid/".concat(p)},p)),i.a.createElement("div",{className:"col"},i.a.createElement("div",{className:"row py-2"})),i.a.createElement("div",{className:"col-6"},E?i.a.createElement(m,Object.assign({},e,{bidId:p})):n.isOnAcquisition?i.a.createElement(f,Object.assign({},e,{bidId:p})):i.a.createElement(d,Object.assign({},e,{bidId:p,price:n.betPrice,forfeit:n.forfeit}))))):i.a.createElement("div",{className:"container m-2"},i.a.createElement("div",{className:"d-flex justify-content-center"},i.a.createElement("div",{className:"spinner-grow",role:"status"},i.a.createElement("span",{className:"visually-hidden"},"Loading..."))))}},333:function(e,t){},335:function(e,t){},336:function(e,t){},341:function(e,t){},343:function(e,t){},350:function(e,t){},369:function(e,t){},381:function(e,t){},384:function(e,t){},7:function(e,t,a){"use strict";a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return l}));var n=a(0),r=a.n(n),c=function(e){return parseFloat(e)/1e24||0};function l(){return r.a.createElement("div",{className:"d-flex justify-content-center",key:"loader"},r.a.createElement("div",{className:"spinner-grow",role:"status"},r.a.createElement("span",{className:"visually-hidden"},"Loading...")))}function s(){return r.a.createElement("div",null,r.a.createElement("h4",null,"Hello"),r.a.createElement("ul",null,r.a.createElement("p",null,"This is NEAR Account Marketplace. It allows you to sell, bet and buy NEAR Account names.")),r.a.createElement("h4",null,"For whom"),r.a.createElement("ul",null,r.a.createElement("p",null,"Founders \u2014 to allow you to find brilliant account names and place them onto the market for selling."),r.a.createElement("p",null,"Believers \u2014 to participate in finding fair price, taking rewards for your faithful evaluation and wisdom."),r.a.createElement("p",null,"Claimers \u2014 to obtain perfect account names for inner usage, personal collection or further resales.")),r.a.createElement("h4",null,"Basics"),r.a.createElement("ul",null,r.a.createElement("p",null,"Initial placement costs ~0.42 NEAR. Initial claim price is 1 NEAR. There are two operations available:"),r.a.createElement("li",null,r.a.createElement("p",null,r.a.createElement("strong",null,"Place a bet. "),"This costs half of the current price (starts from 0.5 NEAR at initial state). The payment goes to previous believers, and the price increases for x1.2 times.")),r.a.createElement("li",null,r.a.createElement("p",null,r.a.createElement("strong",null,"Claim an account. "),"This costs full price. You need to wait 48 hours to make sure no one wants to bet on the account. If someone will bet within 48 hours, you will receive all your funds back plus forfeits paid by believer who bets. If no one will bet, the account is totally yours, congratulations!"))),r.a.createElement("h4",null,"Rewards for bets"),r.a.createElement("ul",null,r.a.createElement("p",null,"Each new bet triggers the reward distribution function for previous believers. This means, if you even bet only once, you will receive rewards multiple times. The function converges to 25% rewards for each bet."),r.a.createElement("p",null,r.a.createElement("i",null,"Example. Let's say, you bet 0.6 NEAR for ",r.a.createElement("strong",null,"apple.near"),". In a couple days its price has been increased by series of bets, and you have been received 0.75 NEAR rewards for that bet in total."))),r.a.createElement("h4",null,"Rewards for claims"),r.a.createElement("ul",null,r.a.createElement("p",null,"Claim is the most important and unique procedure as it finalizes the lifetime of account on the market. The rewards for the successful claim are the biggest."),r.a.createElement("p",null,"First of all, the founder of the account gets 25% of claim price as additional reward. It means, even not betting at all, it's still possible to take huge rewards by bringing awesome account names to the market."),r.a.createElement("p",null,r.a.createElement("i",null,"Due to importance of claiming accounts, as it helps for the main purpose of the project, the marketplace takes zero commission for claiming."))),r.a.createElement("h4",null,"Commission"),r.a.createElement("ul",null,r.a.createElement("p",null,"Marketplace takes 5% commission for each bet plus small constant for initial placement (~0.42 NEAR)."),r.a.createElement("p",null,"Marketplace takes 5% commission in addition, in case of betting for account which is under claiming. This is necessary to prevent holding the account with no willing to actually claim it. Strategies that disturbing market in such way are not welcomed as they diverge with the purpose of the marketplace."),r.a.createElement("p",null,"Marketplace takes zero commission for claim.")),r.a.createElement("h4",null,"Forfeits"),r.a.createElement("ul",null,r.a.createElement("p",null,"Forfeit is an additional cost for placing a bet while the account is under claiming. Its value grows linearly from 0% at the moment when claim requested, and up to 20% at the end of 48-hours period. Forfeits are paid to claimers directly. The purpose of forfeit is to pay for claimers' willing to obtain an account.")),r.a.createElement("h4",null,"Specific cases"),r.a.createElement("ul",null,r.a.createElement("p",null,"Knowing the mechanics, try to find your personal way to reach the maximal value. There are couple examples that may help you."),r.a.createElement("li",null,r.a.createElement("p",null,r.a.createElement("strong",null,"Using multiple accounts and place series of bets. "),"As all Believers behind their accounts are anonymous, you can use multiple accounts while betting. That's why there is no reason to disallow to bet multiple times from the same account - you can simply bet from another one. You may use this trick if you want to hide your interest or intentions by spreading up your bets between multiple accounts.")),r.a.createElement("li",null,r.a.createElement("p",null,r.a.createElement("strong",null,"Sell the account for the full price. "),"If you are sure about fair price, you shouldn't wait until others bet. You can simply bet as many times as necessary to increase the price up to the value that makes sense to you. In this case you may take up to 87.5% rewards taken from claimer directly, not sharing with anyone.")),r.a.createElement("p",null,"Also mechanics is tuned in such way to make sure it's impossible to take less than you bet.")),r.a.createElement("h4",null,"Account claiming procedure"),r.a.createElement("ul",null,r.a.createElement("p",null,"1. (For experts) replace public key 2. TBD")),r.a.createElement("h4",null,"Example of distribution"),r.a.createElement("ul",null,r.a.createElement("p",null,"The following spreadsheet shows rewards distribution for an account that has been bet for 15 times and claimed afterwards. 0-th bet means initial offering from founder, all other lines correspond to bets."),r.a.createElement("p",null,r.a.createElement("samp",null,"Claim price: 15.407",r.a.createElement("br",null),"Sum of bets: 36.4342",r.a.createElement("br",null),"Commission: 2.2175",r.a.createElement("br",null),"0 bet:  0.4167,  rewards:  4.6018,   ratio:  11.0442",r.a.createElement("br",null),"1 bet:  0.5000,  rewards:  0.6250,   ratio:  1.2500",r.a.createElement("br",null),"2 bet:  0.6000,  rewards:  0.7500,   ratio:  1.2500",r.a.createElement("br",null),"3 bet:  0.7200,  rewards:  0.9000,   ratio:  1.2500",r.a.createElement("br",null),"4 bet:  0.8640,  rewards:  1.0800,   ratio:  1.2500",r.a.createElement("br",null),"5 bet:  1.0368,  rewards:  1.2959,   ratio:  1.2499",r.a.createElement("br",null),"6 bet:  1.2442,  rewards:  1.5550,   ratio:  1.2499",r.a.createElement("br",null),"7 bet:  1.4930,  rewards:  1.8656,   ratio:  1.2496",r.a.createElement("br",null),"8 bet:  1.7916,  rewards:  2.2375,   ratio:  1.2489",r.a.createElement("br",null),"9 bet:  2.1499,  rewards:  2.6811,   ratio:  1.2471",r.a.createElement("br",null),"10 bet:  2.5799,  rewards:  3.2047,   ratio:  1.2422",r.a.createElement("br",null),"11 bet:  3.0959,  rewards:  3.8073,   ratio:  1.2298",r.a.createElement("br",null),"12 bet:  3.7150,  rewards:  4.4595,   ratio:  1.2004",r.a.createElement("br",null),"13 bet:  4.4581,  rewards:  5.0908,   ratio:  1.1419",r.a.createElement("br",null),"14 bet:  5.3497,  rewards:  5.8400,   ratio:  1.0917",r.a.createElement("br",null),"15 bet:  6.4196,  rewards:  9.6294,   ratio:  1.5000",r.a.createElement("br",null),"Sum of rewards: 49.6237"))))}}},[[205,1,2]]]);
//# sourceMappingURL=main.975239f6.chunk.js.map